# ü§ù –ú–µ–Ω–µ–¥–∂–µ—Ä: –ê–≥–µ–Ω—Ç—ã (Agents)

**–ö–æ–¥:** `src/views/Agents.svelte`  
**–†–æ—É—Ç:** `/agents` (Layout: `Main`)

–ú–æ–¥—É–ª—å **–ê–≥–µ–Ω—Ç—ã** –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏ (–∞–≥–µ–Ω—Ç–∞–º–∏), –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–ª–µ–∫–∞—é—Ç –Ω–æ–≤—ã—Ö —Ä–µ–∑–∏–¥–µ–Ω—Ç–æ–≤ –≤ –ö–ª—É–±. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º, –≤–∏–¥–µ—Ç—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –≤–µ—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–∑–∞–º–µ—Ç–∫–∏).

## –°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤

–û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–µ—Å—Ç—Ä –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

![–°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤](../images/manager/agents/agents_list.png)
{style="block"}

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

*   **–§–∏–ª—å—Ç—Ä –ø–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É:** –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –≤–≤–µ—Ä—Ö—É –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤.
    *   –õ–æ–≥–∏–∫–∞: –ê–≥–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç, –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –ö–æ–º–º—å—é–Ω–∏—Ç–∏-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º (–ö–ú).
    *   –û–ø—Ü–∏–∏: "–í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã", "–ù–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞", –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ö–ú.
*   **–ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≥–µ–Ω—Ç–∞:**
    *   **–ê–≤–∞—Ç–∞—Ä –∏ –ò–º—è:** –î–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è.
    *   **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ ("–£ –∞–≥–µ–Ω—Ç–∞ N –∫–ª–∏–µ–Ω—Ç–æ–≤..."). –¢–µ–∫—Å—Ç —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–∏—Å–ª–∞ (—Ñ—É–Ω–∫—Ü–∏—è `nwfi`).
    *   **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (—Å–ø—Ä–∞–≤–∞):**
        1.  üë§ **–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å —Å–æ —Å–ø–∏—Å–∫–æ–º —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤.
        2.  üìù **–ñ—É—Ä–Ω–∞–ª:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –ø–æ –∞–≥–µ–Ω—Ç—É.

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–º (Drawer)

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (Drawer). –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–Ω–µ–ª–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (`formData.type`).

### –†–µ–∂–∏–º: –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–≤–µ–ª –¥–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç.

![–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞](../images/manager/agents/agents_clients.png)
{style="block"}

*   **–ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –§–ò–û –∏ –∫–æ–º–ø–∞–Ω–∏—é.
*   **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Å–ø—Ä–∞–≤–∞ (—Å—Ç—Ä–µ–ª–∫–∞) –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (`/users/:id`).

### –†–µ–∂–∏–º: –ñ—É—Ä–Ω–∞–ª –∑–∞–º–µ—Ç–æ–∫

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∞–≥–µ–Ω—Ç–æ–º (–¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏, —É—Å–ª–æ–≤–∏—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏).

![–ñ—É—Ä–Ω–∞–ª –∑–∞–º–µ—Ç–æ–∫](../images/manager/agents/agents_notes.png)
{style="block"}

*   **–ò—Å—Ç–æ—Ä–∏—è:** –°–ø–∏—Å–æ–∫ –ø—Ä–æ—à–ª—ã—Ö –∑–∞–º–µ—Ç–æ–∫ —Å –¥–∞—Ç–æ–π –∏ –∞–≤—Ç–æ—Ä–æ–º.
*   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ:** –ü–æ–ª–µ –≤–≤–æ–¥–∞ "–ó–∞–º–µ—Ç–∫–∞" –∏ –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" (–∑–µ–ª–µ–Ω–∞—è).
*   **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ú–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏ (–∏–∫–æ–Ω–∫–∞ –∫–∞—Ä–∞–Ω–¥–∞—à–∞ –≤ —Å–ø–∏—Å–∫–µ).

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –î–∞–Ω–Ω—ã–µ –∏ API
*   **–°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤:** `agentList` (Endpoint: `/ma/user/agent/list`). –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤ –∏ —Å–ø–∏—Å–æ–∫ –∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.
*   **–ó–∞–º–µ—Ç–∫–∏:**
    *   `agentNotesList` (–ü–æ–ª—É—á–µ–Ω–∏–µ).
    *   `agentNoteCreate` (–°–æ–∑–¥–∞–Ω–∏–µ).
    *   `agentNoteUpdate` (–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ).

### –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (`createAgentsList`).
```typescript
// –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É
if (
    filter.communityManager == -1 ||
    (filter.communityManager == 0 && ag.communityManagers['0']) || // –ö–ª–∏–µ–Ω—Ç—ã –±–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
    (filter.communityManager > 0 && ag.communityManagers[filter.communityManager.toString()])
) { ... }
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
*   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π layout `Drawer` (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ CSS –∫–ª–∞—Å—Å—ã DaisyUI `drawer`, `drawer-side`).
*   –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `formState` —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å—é –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏.
*   –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `formData.type` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –º–µ–∂–¥—É `'clients'` –∏ `'notes'`.
