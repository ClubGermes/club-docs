# Архитектура Frontend (Club Manager)

Проект представляет собой административную панель (SPA) для управления Клубом, написанную на **Svelte 4** с использованием **Vite**, **TypeScript** и обернутая в **Tauri** (для десктопа) и **Capacitor**.

## Структура проекта

Проект реализует **собственный SPA-роутер** и имеет следующую структуру:

*   **`src/libs/Router`**: Кастомное решение для маршрутизации.
    *   Поддерживает Layouts (обертки), Guards (защита роутов) и передачу параметров.
    *   Файл `routes/routes.ts` определяет карту приложения (например, `/users`, `/events`, `/charts`).
*   **`src/queries/`**: Слой API. Здесь лежат определения эндпоинтов. Это аналог "Repository/Service" слоя.
*   **`src/helpers/entity.ts` & `collector.ts`**: **Ключевой архитектурный паттерн проекта** (Pattern "Entity").
*   **`src/views/`**: Страницы приложения (Home, Users, Events и т.д.).
*   **`src/components/`**: Переиспользуемые UI компоненты.
*   **`src/stores/`**: Глобальные Svelte-сторы (user, token, states).

## Сетевой слой

*   **Request Helper (`src/helpers/request.ts`)**: Использует **`XMLHttpRequest`** (XHR).
    *   Обрабатывает таймауты и кастомные заголовки (`x-binding-*`).
    *   Автоматически обновляет токен и данные пользователя при каждом успешном ответе.
*   **WebSocket (`src/helpers/websocket.ts`)**: Кастомный класс для WS с авто-реконнектом и heartbeat.

## Роутинг

*   Используется собственный класс `Router` (`src/libs/Router/router.ts`).
*   Поддерживает регулярные выражения в путях (например, `constraints: { 'id': '\d+' }`).
