# üëÆ –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä: –ú–æ–Ω–∏—Ç–æ—Ä (Monitor)

**–ö–æ–¥:** `frontend/club-moderator/src/views/Home.svelte`
**–†–æ—É—Ç:** `/home` (Layout: `Main`)

–°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ (–î–∞—à–±–æ—Ä–¥), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–≤–æ–¥–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º–µ.

![–ú–æ–Ω–∏—Ç–æ—Ä](../images/moderator/monitor/home_dashboard.png)
{style="block"}

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —Ç—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–ª–æ–∫–∞:

1.  **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Total Stats)**:
    *   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    *   –ú–µ—Ç—Ä–∏–∫–∏: **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (–≤—Å–µ–≥–æ), **–ö–ª–∏–µ–Ω—Ç—ã** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—å—é client), **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã**.

2.  **–î–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Today Stats)**:
    *   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏—Ä–æ—Å—Ç –∑–∞ —Ç–µ–∫—É—â–∏–µ —Å—É—Ç–∫–∏.
    *   –ú–µ—Ç—Ä–∏–∫–∏: –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã, –ù–æ–≤—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã.
    *   –ü–æ–¥ —Ü–∏—Ñ—Ä–æ–π –≤—ã–≤–æ–¥–∏—Ç—Å—è —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–Ø–Ω–≤–∞—Ä—å, 28").
    *   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* –ù–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ —É –±–ª–æ–∫–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –≤—ã–≤–æ–¥–∏—Ç—Å—è `false` ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—à–∏–±–∫–∏ –≤ —à–∞–±–ª–æ–Ω–µ –∫–æ–¥–∞ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã), –Ω–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ç–∞–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–∞—Ç–∞.

3.  **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–≥–æ–≤**:
    *   –î–≤–µ —Ç–∞–±–ª–∏—Ü—ã (–Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤–∏–¥–Ω–∞ –≤–µ—Ä—Ö–Ω—è—è), –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ç–µ–≥–æ–≤.
    *   **–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è**: –ö–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.
    *   **–ò–Ω—Ç–µ—Ä–µ—Å** (–Ω–∏–∂–µ, –Ω–µ –≤–ª–µ–∑ –≤ —Å–∫—Ä–∏–Ω): –ö–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∏—â—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.
    *   –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞: `–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞` ‚Äî `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π`.

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`onMount`) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫ API —á–µ—Ä–µ–∑ `collector`:
1.  –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (`statsUsers`).
2.  –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ç–µ–≥–∞–º (`statsTags`).

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
*   **–¢–µ–≥–∏**: –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ –≤–∏–¥–µ –æ–±—ä–µ–∫—Ç–∞ `{"tag_name": count}`.
*   –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**: –ö–ª—é—á–∏ –æ–±—ä–µ–∫—Ç–∞ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏—è (`tags[b] - tags[a]`), —á—Ç–æ–±—ã —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å —Å–≤–µ—Ä—Ö—É.
*   **–î–∞—Ç–∞**: –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö–µ–ª–ø–µ—Ä `formatDatetime(Date.now(), 'MS, DD', true, false)`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç timestamp –≤ —Ñ–æ—Ä–º–∞—Ç "–ú–µ—Å—è—Ü, –î–µ–Ω—å".

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### API –ó–∞–ø—Ä–æ—Å—ã
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ª–æ–π `queries/stats.ts`.

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è Handler | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `statsUsersHandler` | `/m/stats/users` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏ `users`, `clients`, `managers` (–æ–±—â–∏–µ) –∏ `*_new` (–∑–∞ —Å–µ–≥–æ–¥–Ω—è). |
| `statsTagsHandler` | `/m/stats/tags` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `{ tags: {...}, interests: {...} }`. |

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
*   **Layout**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è CSS-–∫–ª–∞—Å—Å—ã `stats` –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ DaisyUI –¥–ª—è –≤–µ—Ä—Ö–Ω–∏—Ö –±–ª–æ–∫–æ–≤ –∏ `grid` –¥–ª—è —Ç–∞–±–ª–∏—Ü —Ç–µ–≥–æ–≤.
*   **Reactive Statements**: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–ª—é—á–µ–π —Ç–µ–≥–æ–≤ —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞:
    ```typescript
    $: tagsKeys = Object.keys(tags).sort((a, b) => tags[b] - tags[a]);
    ```
    –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É —Å–ø–∏—Å–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
