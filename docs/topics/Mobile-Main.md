# Основные Экраны и Функции

Полный обзор функциональности клиентского мобильного приложения.

## 1. Экран «Монитор» (Home)
**Файл:** `src/views/Home/Home.svelte`
**Маршрут:** `/home`

Главный хаб приложения. Агрегирует активность и предоставляет доступ к инструментам.

![Home Screen](mobile-home-screen.png) { width="300" }

### Верхняя панель (Header)
Панель навигации содержит критически важные элементы управления:

*   **Профиль (слева):** Аватар пользователя. Нажатие открывает настройки (`/me`).
*   **Инструменты (справа):**
    1.  **Сканер:** Запуск камеры для считывания кодов.
    2.  **Мой QR:** Показ личного кода для обмена контактами.
    3.  **Центр уведомлений:** Иконка колокольчика с **бейджем** (счетчиком непрочитанных), привязанным к `bindings.notifications`.

### Лента контента

1.  **Карусель Событий (Events)**
    *   **Данные:** `eventsFeed` (события на сегодня и будущее).
    *   **UI:** Горизонтальный свайп карточек `EventCard`. Цвет карточки зависит от формата мероприятия (Тендер, Нетворкинг и др.).

2.  **Опросы (Polls)**
    *   **Компонент:** `PollCard`.
    *   **Логика:** Отображаются только активные опросы. Поддерживается множественный выбор и ввод своего варианта (custom). Ответы отправляются через `addVote`.

3.  **Избранные контакты**
    *   Быстрый доступ к сохраненным контактам.
    *   Кнопка **"Все контакты"** вызывает модальное окно (`CupertinoPane`) с полным списком.

    ![Contacts List](home-contacts-list-popup.png) { width="250" }

4.  **Потенциальные партнёры (AI Recommendations)**
    *   **Query:** `userRecommendations`.
    *   **Логика:** Список формируется на бэкенде на основе пересечения тегов спроса и предложения (`tags` vs `interests`).

---

## 2. Центр Уведомлений (Log)
**Файл:** `src/layouts/Main/components/Log/index.svelte`

Лента событий, требующих внимания пользователя. Открывается поверх основного экрана.

![Notifications Log](home-notifications-log.png) { width="300" }

### Типы событий
Система обрабатывает различные типы payload (`n.event`):

| Тип события | Описание UI | Действие |
| :--- | :--- | :--- |
| **arrive** | "Имя Фамилия прибыл на мероприятие..." | Переход в профиль или к событию |
| **manager_connection_add** | Предложение встречи | Кнопки **«Согласиться»** / **«Отклонить»** |
| **manager_connection_response** | Ответ на предложение | Индикация статуса (принято/отклонено) |
| **online_request** | Запрос на онлайн-встречу | Переход к согласованию слотов времени |

---

## 3. Профиль пользователя (Settings/Me)
**Файл:** `src/views/Settings/Settings.svelte`

Управление личными данными и анкетой резидента.

![User Profile](user-profile-screen.png) { width="300" }

### Функциональные блоки
1.  **Личные данные:**
    *   Редактирование аватара (с кропером `UploadAvatar`).
    *   ФИО, Должность, Компания.
    *   *Важно:* Смена Email/Телефона требует подтверждения через код (`userChange...`).
2.  **Бизнес-метрики:** Оборот, сотрудники, год основания (с настройками приватности).
3.  **Тегирование (Tagging System):**
    *   Используются справочники `tagList`.
    *   **Категории:**
        *   `company_scope` (Специализация)
        *   `company_needs` (Потребности)
        *   `personal_expertise` (Компетенции)
        *   `hobbies` (Увлечения)
4.  **Управление аккаунтом:** Выход и удаление профиля (soft delete на 2 недели).

---

## 4. QR Инструменты
**Файл:** `src/views/Home/components/`

Инструменты для взаимодействия в офлайне.

### Сканер (ScannerButton)
*   **Библиотека:** `@capacitor-mlkit/barcode-scanning`.
*   **UI:** При активации интерфейс становится прозрачным (`barcode-scanner-active`), отображается рамка наведения.
*   **Логика:**
    *   `type: 'user'` → Открывает профиль резидента.
    *   `type: 'event'` → Регистрирует на событие (`QREventRegistration`) и открывает его.

![Camera Permission](home-camera-permission-prompt.png) { width="250" }

### Мой QR (QRButton)
*   **Query:** `QRShow`.
*   **UI:** Показывает модальное окно с персональным QR-кодом пользователя для предъявления на входе или обмена контактами.