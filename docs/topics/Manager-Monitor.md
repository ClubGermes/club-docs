# üìä –ú–µ–Ω–µ–¥–∂–µ—Ä: –ú–æ–Ω–∏—Ç–æ—Ä (Dashboard)

**–ö–æ–¥:** `Home.svelte` (frontend/club-manager/src/views/Home.svelte)  
**–†–æ—É—Ç:** `/home` (Layout: `Main`)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ("–ú–æ–Ω–∏—Ç–æ—Ä"). –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é **–ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫—É** (–∏–ª–∏ —Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–ª–∏–µ–Ω—Ç–æ–≤.
–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞: –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–ö–æ–Ω—Ç—Ä–æ–ª—å) –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ç–∞–¥–∏—è–º –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂.

> **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è UI**

![Dashboard](../images/manager/monitor/dashboard-main.png)
{style="block"}

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ CRUD, —ç—Ç–æ—Ç —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç **—Å—ã—Ä–æ–π –ª–æ–≥ —Å–æ–±—ã—Ç–∏–π –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**, –∞ –∑–∞—Ç–µ–º **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–ª–æ–Ω–æ–∫.

### –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω `Entity/Collector`:
*   **Query:** `userMonitorSales` (`src/queries/user.ts`).
*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/ma/user/monitor/sales`.
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `showMeetingsAmount: true` (–ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Å—Ç—Ä–µ—á).
*   **–í–æ–∑–≤—Ä–∞—Ç:** –û–±—ä–µ–∫—Ç —Å –º–∞—Å—Å–∏–≤–∞–º–∏ `log` (—Å–æ–±—ã—Ç–∏—è), `users` (–∫–ª–∏–µ–Ω—Ç—ã), `community_managers`.

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (KPI)
–í –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç "–ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã" (–í—Å–µ–≥–æ / –ú–µ—Å—è—Ü / –ù–µ–¥–µ–ª—è / –í—á–µ—Ä–∞).
*   **Query:** `clientsStats` (`src/queries/stats.ts`).
*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/ma/stats/clients/new`.

---

## –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (createMonitor)

–§—É–Ω–∫—Ü–∏—è `createMonitor()` –≤ `Home.svelte` ‚Äî —ç—Ç–æ —è–¥—Ä–æ –ª–æ–≥–∏–∫–∏ —ç—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞. –û–Ω–∞ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –º–∞—Å—Å–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Ö –ø–æ **–±–∞–∫–µ—Ç–∞–º (buckets)** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### –ì—Ä—É–ø–ø—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ, —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)

1.  **–ö–æ–Ω—Ç—Ä–æ–ª—å (Time Control)**
    *   *–£—Å–ª–æ–≤–∏–µ:* `u.membership.semaphore[1].data.time_control` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
    *   *UI:* –°–∏–Ω—è—è –ø–ª–∞—à–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–ö–æ–Ω—Ç—Ä–æ–ª—å".
    *   *–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:* –ü–æ –¥–∞—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—è.

2.  **–ö–æ–Ω—Ç—Ä–æ–ª—å –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è (Chief Control)**
    *   *–£—Å–ª–æ–≤–∏–µ:* `u.membership.semaphore[1].data.time_chief_control` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
    *   *UI:* –ì–æ–ª—É–±–∞—è –ø–ª–∞—à–∫–∞ "–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä—É–∫.".

3.  **–°—Ç–∞–¥–∏–∏ –≤–æ—Ä–æ–Ω–∫–∏ (monitor.stages)**
    *   *–£—Å–ª–æ–≤–∏–µ:* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ (0-6) –∏ **–ù–ï** –∏–º–µ–µ—Ç —Ñ–ª–∞–≥–æ–≤ `rejection` (–æ—Ç–∫–∞–∑) –∏–ª–∏ `postopen` (–æ—Ç–ª–æ–∂–µ–Ω).
    *   *–°—Ç–∞–¥–∏–∏:*
        *   0. –£ –∞–≥–µ–Ω—Ç–∞
        *   1. –°–æ–∏—Å–∫–∞—Ç–µ–ª—å
        *   2. –ê–¥–º–∏—Å—Å–∏—è
        *   3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        *   4. –ö–∞–Ω–¥–∏–¥–∞—Ç
        *   5. –û–ø–ª–∞—Ç–∞
        *   6. –ß–ª–µ–Ω –∫–ª—É–±–∞
    *   *UI:* –ó–µ–ª–µ–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.

4.  **–ü—Ä–æ—Å—Ä–æ—á–∫–∞ (monitor.stagesOutdated)**
    *   *–£—Å–ª–æ–≤–∏–µ:* `stage.time < today` (–≤—Ä–µ–º—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞–¥–∏–∏ –∏—Å—Ç–µ–∫–ª–æ).
    *   *UI:* –ö–Ω–æ–ø–∫–∞ —Å –∫—Ä–∞—Å–Ω–æ–π –æ–±–≤–æ–¥–∫–æ–π "–ü—Ä–æ—Å—Ä–æ—á–∫–∞".

5.  **–û—Ç–∫–∞–∑ / –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ**
    *   –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã.

---

## –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞–¥ —Å–µ—Ç–∫–æ–π –∫–∞—Ä—Ç–æ—á–µ–∫.

| –≠–ª–µ–º–µ–Ω—Ç | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ –∫–æ–¥–µ | –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ |
| :--- | :--- | :--- |
| **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** | `filter.communityManager` | Dropdown. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `community_manager_id`. –ó–Ω–∞—á–µ–Ω–∏–µ `-1` ‚Äî –≤—Å–µ, `0` ‚Äî –±–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä–∞. |
| **–ê–≥–µ–Ω—Ç—ã** | `filter.agent` | Dropdown. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `agent_id`. |
| **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** | `filter.dateComment` | –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞–≤–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (3 –¥–Ω—è, –Ω–µ–¥–µ–ª—è, 2 –Ω–µ–¥–µ–ª–∏). |
| **–ö–ú** (–°–∏–Ω–∏–π) | `filter.cmFlag` | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ö–æ–º–º—å—é–Ω–∏—Ç–∏ –ú–µ–Ω–µ–¥–∂–µ—Ä—É (department = 1). |
| **–û–ü** (–ë–∏—Ä—é–∑–æ–≤—ã–π) | `filter.opFlag` | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –û—Ç–¥–µ–ª–∞ –ü—Ä–æ–¥–∞–∂ (department != 1). |
| **–ù–ï–¢** (–ö—Ä–∞—Å–Ω—ã–π) | `filter.noneFlag` | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä–∞. |
| **–ß–µ–∫–±–æ–∫—Å—ã** | `filter.check` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ–≤–µ—Ä–∫–∏ (control). |

---

## –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞

–ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è **–∏–Ω–ª–∞–π–Ω** –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ `#each` –≤ `Home.svelte`.

**–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ä—Ç–æ—á–∫–∏:**
1.  **–ê–≤–∞—Ç–∞—Ä –∏ –°—Ç–∞—Ç—É—Å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Avatar`. –¶–≤–µ—Ç –∫–æ–ª—å—Ü–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞.
2.  **–ò–º—è –∏ –ö–æ–º–ø–∞–Ω–∏—è:** `nameNormalization(u.name)`.
3.  **Telegram:** –ò–∫–æ–Ω–∫–∞ —Å–∞–º–æ–ª–µ—Ç–∏–∫–∞, –µ—Å–ª–∏ –µ—Å—Ç—å `link_telegram`.
4.  **–î–∞—Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º, –µ—Å–ª–∏ –¥–∞—Ç–∞ –ø—Ä–æ—à–ª–∞.
5.  **Action Button:** –ö–Ω–æ–ø–∫–∞ —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π ‚ûî –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`/users/:id`).

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –∏ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   ‚ö†Ô∏è **Inline Rendering:** –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏. –≠—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É.
*   ‚ö†Ô∏è **Heavy Client Logic:** –í—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç—ã—Å—è—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞.
*   **Reactivity:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Svelte reactivity (`$: users, filter, createMonitor()`), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ UI.
