# üìä –ú–µ–Ω–µ–¥–∂–µ—Ä: –ú–æ–Ω–∏—Ç–æ—Ä (Dashboard)

**–ö–æ–¥:** [`Home.svelte`](../../../frontend/club-manager/src/views/Home.svelte)  
**–†–æ—É—Ç:** `/home` (Layout: `Main`)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ("–ú–æ–Ω–∏—Ç–æ—Ä"). –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é **–ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫—É** (—Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–ª–∏–µ–Ω—Ç–æ–≤.
–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞: –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–ö–æ–Ω—Ç—Ä–æ–ª—å) –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ç–∞–¥–∏—è–º –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂.

> **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è UI**
> 
> ![Dashboard](../images/manager/monitor/dashboard-main.png)
> {style="block"}

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ CRUD, —ç—Ç–æ—Ç —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç **—Å—ã—Ä–æ–π –ª–æ–≥ —Å–æ–±—ã—Ç–∏–π –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**, –∞ –∑–∞—Ç–µ–º **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–ª–æ–Ω–æ–∫.

### –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω `Entity/Collector` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:
*   **Query:** `userMonitorSales` (`src/queries/user.ts`).
*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/ma/user/monitor/sales`.
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `showMeetingsAmount: true` (–ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Å—Ç—Ä–µ—á).
*   **–í–æ–∑–≤—Ä–∞—Ç:** –û–±—ä–µ–∫—Ç —Å –º–∞—Å—Å–∏–≤–∞–º–∏ `log` (—Å–æ–±—ã—Ç–∏—è), `users` (–∫–ª–∏–µ–Ω—Ç—ã), `community_managers`.

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (KPI)
–í –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç "–ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã" (–í—Å–µ–≥–æ / –ú–µ—Å—è—Ü / –ù–µ–¥–µ–ª—è / –í—á–µ—Ä–∞).

![KPI Widget](../images/manager/monitor/new_clients.png)
{width="200"}

*   **Query:** `clientsStats` (`src/queries/stats.ts`).
*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/ma/stats/clients/new`.

---

## –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (createMonitor)

–§—É–Ω–∫—Ü–∏—è `createMonitor()` ‚Äî —ç—Ç–æ —è–¥—Ä–æ –ª–æ–≥–∏–∫–∏ —ç—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞. –û–Ω–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö.
–ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –º–∞—Å—Å–∏–≤ `users`, —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–≥–æ —Å `log` –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ **–±–∞–∫–µ—Ç–∞–º (buckets)**.

### –ì—Ä—É–ø–ø—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ, —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)

#### –ö–æ–Ω—Ç—Ä–æ–ª—å (Time Control)
![Time Control](../images/manager/monitor/stadia_1_control_blue.png) {width="150"}

*   **–£—Å–ª–æ–≤–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ `time_control` –≤ `semaphore[1]` (–û—Ü–µ–Ω–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞).
*   **UI:** –°–∏–Ω—è—è –ø–ª–∞—à–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–ö–æ–Ω—Ç—Ä–æ–ª—å".
*   **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –ü–æ –¥–∞—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—è (–æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º).

#### –ö–æ–Ω—Ç—Ä–æ–ª—å –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è
*   **–£—Å–ª–æ–≤–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ `time_chief_control`.
*   **UI:** –ì–æ–ª—É–±–∞—è –ø–ª–∞—à–∫–∞ "–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä—É–∫.".

#### –°—Ç–∞–¥–∏–∏ –≤–æ—Ä–æ–Ω–∫–∏ (`monitor.stages`)
*   **–£—Å–ª–æ–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ç–∞–¥–∏–∏ (0-6) –ò **–ù–ï** –∏–º–µ–µ—Ç —Ñ–ª–∞–≥–æ–≤ `rejection` (–æ—Ç–∫–∞–∑) –∏–ª–∏ `postopen` (–æ—Ç–ª–æ–∂–µ–Ω).
*   **–°—Ç–∞–¥–∏–∏:**
    *   **0** ‚Äî –£ –∞–≥–µ–Ω—Ç–∞ (–ö—Ä–∞—Å–Ω—ã–π)
    *   **1** ‚Äî –°–æ–∏—Å–∫–∞—Ç–µ–ª—å (–°–µ—Ä—ã–π)
    *   **2** ‚Äî ![Admission](../images/manager/monitor/stadia_4_admission_green.png) {width="150"} **–ê–¥–º–∏—Å—Å–∏—è**
    *   **3** ‚Äî ![Connection](../images/manager/monitor/stadia_5_connection_green.png) {width="150"} **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
    *   **4** ‚Äî ![Candidate](../images/manager/monitor/stadia_6_candidate_green.png) {width="150"} **–ö–∞–Ω–¥–∏–¥–∞—Ç**
    *   **5** ‚Äî ![Payment](../images/manager/monitor/stadia_7_payment_green.png) {width="150"} **–û–ø–ª–∞—Ç–∞**
    *   **6** ‚Äî ![Member](../images/manager/monitor/stadia_8_member_green.png) {width="150"} **–ß–ª–µ–Ω –∫–ª—É–±–∞**

#### –ü—Ä–æ—Å—Ä–æ—á–∫–∞ (`monitor.stagesOutdated`)
![Outdated](../images/manager/monitor/stadia_10_admission_red.png) {width="150"}

*   **–£—Å–ª–æ–≤–∏–µ:** `stage.time < today`. –í—Ä–µ–º—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞–¥–∏–∏ –ø—Ä–µ–≤—ã—Å–∏–ª–æ –Ω–æ—Ä–º–∞—Ç–∏–≤.
*   **UI:** –ö–Ω–æ–ø–∫–∞ —Å –∫—Ä–∞—Å–Ω–æ–π –æ–±–≤–æ–¥–∫–æ–π –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–∞–¥–∏–∏.

---

## –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞–¥ —Å–µ—Ç–∫–æ–π –∫–∞—Ä—Ç–æ—á–µ–∫. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Å—á–µ—Ç `createMonitor`.

![Base Filters](../images/manager/monitor/filters_base.png)
{style="block"}

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

| –≠–ª–µ–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è |
| :--- | :--- | :--- |
| **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** | Dropdown. –§–∏–ª—å—Ç—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ `community_manager_id`. | `filter.communityManager` |
| **–ê–≥–µ–Ω—Ç—ã** | Dropdown. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `agent_id`. | `filter.agent` |
| **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** | –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞–≤–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (3 –¥–Ω—è, –Ω–µ–¥–µ–ª—è, 2 –Ω–µ–¥–µ–ª–∏). | `filter.dateComment` |
| **–ö–ú** (–°–∏–Ω–∏–π) | –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ö–æ–º–º—å—é–Ω–∏—Ç–∏ –ú–µ–Ω–µ–¥–∂–µ—Ä—É (department = 1). | `filter.cmFlag` |
| **–û–ü** (–ë–∏—Ä—é–∑–æ–≤—ã–π) | –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –û—Ç–¥–µ–ª–∞ –ü—Ä–æ–¥–∞–∂ (department != 1). | `filter.opFlag` |
| **–ù–ï–¢** (–ö—Ä–∞—Å–Ω—ã–π) | –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞. | `filter.noneFlag` |
| **–ß–µ–∫–±–æ–∫—Å—ã** | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ–≤–µ—Ä–∫–∏ (control). 3 —Å–æ—Å—Ç–æ—è–Ω–∏—è (–í—Å–µ, –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ, –ù–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ). | `filter.check` |

### –¢–æ–≥–≥–ª—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (Visual Guide)

–°–∫—Ä—ã–≤–∞—é—Ç –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ü–µ–ª—ã–µ —Å–µ–∫—Ü–∏–∏ –Ω–∞ –¥–æ—Å–∫–µ.

| –ò–∫–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
| :---: | :--- | :--- | :--- |
| ![Delay](../images/manager/monitor/5.png) | **–ü—Ä–æ—Å—Ä–æ—á–∫–∞** | `filter.delay` | –ü–æ–∫–∞–∑–∞—Ç—å –±–ª–æ–∫ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Å—Ç–∞–¥–∏–π. |
| ![Agent](../images/manager/monitor/6.png) | **–£ –∞–≥–µ–Ω—Ç–∞** | `filter.stage0` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞–¥–∏—é "0 - –£ –∞–≥–µ–Ω—Ç–∞". |
| ![Post](../images/manager/monitor/7.png) | **–û—Ç–ª–æ–∂–µ–Ω** | `filter.post` | –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. |
| ![Reject](../images/manager/monitor/8.png) | **–û—Ç–∫–∞–∑** | `filter.reject` | –ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –æ—Ç–∫–∞–∑–æ–º. |

---

## –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞

–ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è **–∏–Ω–ª–∞–π–Ω** –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ `#each` –≤ `Home.svelte`. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —ç–ª–µ–º–µ–Ω—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

**–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
1.  **–ê–≤–∞—Ç–∞—Ä:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Avatar`.
2.  **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
    *   –¶–≤–µ—Ç –∫–æ–ª—å—Ü–∞: –†–µ–π—Ç–∏–Ω–≥ —á–ª–µ–Ω—Å—Ç–≤–∞.
    *   –ò–∫–æ–Ω–∫–∞ —Å–∞–º–æ–ª–µ—Ç–∏–∫–∞: –ù–∞–ª–∏—á–∏–µ `link_telegram`.
3.  **–î–∞–Ω–Ω—ã–µ:** –ò–º—è (`nameNormalization`), –ö–æ–º–ø–∞–Ω–∏—è.
4.  **–°—á–µ—Ç—á–∏–∫–∏:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å—Ç—Ä–µ—á (–µ—Å–ª–∏ –µ—Å—Ç—å).
5.  **Action Button:** –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø—Ä–æ—Ñ–∏–ª—å (`router.go('/users/' + u.id)`).

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –∏ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   ‚ö†Ô∏è **Inline Rendering:** –ö–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏ (–ö–æ–Ω—Ç—Ä–æ–ª—å, –°—Ç–∞–¥–∏–∏, –ü—Ä–æ—Å—Ä–æ—á–∫–∞). –≠—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É UI ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤–Ω–æ—Å–∏—Ç—å –≤ 3-4 –º–µ—Å—Ç–∞.
*   ‚ö†Ô∏è **Heavy Client Logic:** –í—Å—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç—ã—Å—è—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –±–∞–∑—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ª–∞–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤.
*   **Reactivity:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Svelte reactivity (`$: users, filter, createMonitor()`), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ UI –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.
