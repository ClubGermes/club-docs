# Архитектура (Manager)

## Структура проекта (`src/`)

| Папка | Назначение |
|-------|------------|
| `views/` | Основные страницы (Dashboard, Events, Users, Comments) |
| `components/` | UI-компоненты (формы, таблицы, загрузчики) |
| `stores/` | Глобальное состояние (Svelte Stores: user, token, states) |
| `helpers/` | Утилиты: API клиент (`request.ts`), авторизация (`auth.ts`), работа с датами |
| `layouts/` | Шаблоны страниц (Main, Auth) |
| `queries/` | Описание запросов к API |

## Слой данных (Data Layer)

### HTTP Client (`helpers/request.ts`)
Используется `XMLHttpRequest` с централизованной обработкой ошибок и авторизацией.

**Механизм сессии:**
*   При логине токен сохраняется в стор и `localStorage`.
*   В каждый запрос автоматически подмешивается поле `_token` в тело JSON.
*   Если сервер возвращает ошибку авторизации, хелпер `auth.ts` инициирует логаут.

### Обработка ответов
Сервер часто возвращает не только полезные данные, но и управляющие поля:
*   `_alert`: Вызывает моментальное уведомление в интерфейсе.
*   `_notification`: Обновляет системные уведомления.
*   `_bindings`: Метаданные для обновления счетчиков (сообщения, события).

## Состояние (State)
*   **user.ts:** Хранит профиль текущего менеджера и его роли.
*   **token.ts:** Отвечает за хранение и загрузку токена сессии.
*   **states.ts:** Управляет UI-состояниями (например, глобальный индикатор загрузки `loading`).

## Неиспользуемый код (Unused)
Папка **`src-tauri`** и зависимости Tauri в `package.json` на данный момент являются устаревшими (legacy) или зарезервированными на будущее. Вносить изменения в Rust-часть для текущей веб-версии не требуется.