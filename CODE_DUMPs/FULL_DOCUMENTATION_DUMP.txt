=== WRITERSIDE CONFIGURATION ===
File: docs/writerside.cfg
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE ihp SYSTEM "https://resources.jetbrains.com/writerside/1.0/ihp.dtd">

<ihp version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:noNamespaceSchemaLocation="https://resources.jetbrains.com/writerside/1.0/writerside-cfg.xsd">
    <topics dir="topics"/>
    <images dir="images" web-path="ClubGermesDocs"/>
    <categories src="c.list"/>
    <vars src="v.list"/>
    <instance src="in.tree"/>
</ihp>
=== TABLE OF CONTENTS ===
File: docs/in.tree
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE instance-profile
        SYSTEM "https://resources.jetbrains.com/writerside/1.0/product-profile.dtd">

<instance-profile id="in"
                 name="Club Germes Documentation"
                 start-page="Onboarding.topic">

    <toc-element topic="Onboarding.topic"/>
    
    <toc-element toc-title="–ì–∞–π–¥ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞">
        <toc-element topic="Project-Structure.md"/>
        <toc-element topic="Quick-Start.md"/>
        <toc-element topic="Auth-Flow.md"/>
    </toc-element>

    <toc-element toc-title="–ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã">
        <toc-element topic="Event-Registration-Flow.md"/>
        <toc-element topic="Business-Rules.md"/>
    </toc-element>

    <toc-element toc-title="–í–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (Deep Dive)">
        <toc-element topic="Legacy-Internals.md"/>
        <toc-element topic="File-Storage.md"/>
        <toc-element topic="Background-Tasks.md"/>
    </toc-element>

    <toc-element toc-title="–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞">
        <toc-element topic="Deployment.md"/>
    </toc-element>

    <toc-element toc-title="–§—Ä–æ–Ω—Ç–µ–Ω–¥ (Manager)">
        <toc-element topic="Manager-Overview.md"/>
        <toc-element topic="Manager-Setup.md"/>
        <toc-element topic="Manager-Architecture.md"/>
        <toc-element topic="Manager-Auth.md"/>
        <toc-element topic="Manager-Hidden-Gems.md"/>
    </toc-element>

    <toc-element toc-title="–§—Ä–æ–Ω—Ç–µ–Ω–¥ (Mobile)">
        <toc-element topic="Mobile-Overview.md"/>
        <toc-element topic="Mobile-Main.md"/>
        <toc-element topic="Mobile-Events.md"/>
        <toc-element topic="Mobile-Meetings.md"/>
        <toc-element topic="Mobile-Setup.md"/>
        <toc-element topic="Mobile-Architecture.md"/>
        <toc-element topic="Mobile-Auth.md"/>
        <toc-element topic="Mobile-Hidden-Gems.md"/>
    </toc-element>

    <toc-element toc-title="–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏">
        <toc-element topic="API-Reference.md"/>
        <toc-element topic="Database-Schema.md"/>
    </toc-element>

</instance-profile>
=== DOCUMENTATION TOPICS ===

--- FILE: docs/topics/API-Reference.md ---
# –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

> **‚ÑπÔ∏è –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
> –í–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –±—ã—Å—Ç—Ä–æ —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger/OpenAPI.

## –ì–¥–µ –Ω–∞–π—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–ü—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ (`make dev`) –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º:

### Backend Services

| –°–µ—Ä–≤–∏—Å | –¢–∏–ø | URL –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
|--------|-----|------------------|
| **club-api** | REST (Swagger) | [http://localhost:8000/docs](http://localhost:8000/docs) |
| **club-users** | REST (Swagger) | [http://localhost:8001/docs](http://localhost:8001/docs) |
| **club-comments** | REST (Swagger) | [http://localhost:8002/docs](http://localhost:8002/docs) |
| **club-gateway-m** | REST (Swagger) | [http://localhost:8004/docs](http://localhost:8004/docs) |
| **club-media** | REST (Swagger) | [http://localhost:8005/docs](http://localhost:8005/docs) |
| **club-events** | GraphQL Playground | [http://localhost:8003/schema/graphql](http://localhost:8003/schema/graphql) |

### –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
1.  –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
2.  –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Authorize** (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è).
3.  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Try it out` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞.
--- FILE: docs/topics/Auth-Flow.md ---
# –ü–æ—Ç–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (Auth Flow)

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—É—é —Å—Ö–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ—Å—Å–∏–π —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ Redis.

## –û–±—â–∞—è —Å—Ö–µ–º–∞

1.  **–ö–ª–∏–µ–Ω—Ç** (Mobile App) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
2.  **SMS-—à–ª—é–∑** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
3.  **–ö–ª–∏–µ–Ω—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥.
4.  **Backend** –≤—ã–¥–∞–µ—Ç `session_id`.
5.  –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `Authorization: Bearer <session_id>`.

## –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä (Gateway Pattern)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å **`club-gateway-m`**.

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ Gateway –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏.

*   **–ì–¥–µ:** Middleware –≤ `club-gateway-m`.
*   **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** Redis.
*   **–ö–ª—é—á:** `session:<token>`.

### 2. –û–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Context Injection)
–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, Gateway –∏–∑–≤–ª–µ–∫–∞–µ—Ç `user_id` –∏–∑ —Å–µ—Å—Å–∏–∏ Redis –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ–º–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

```http
X-User-ID: 10050
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `club-api` –∏–ª–∏ `club-users`) –¥–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏—à–µ–¥—à–µ–º—É `user_id`, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—è —Ç–æ–∫–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ.

### 3. –ú–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–î–ª—è –∑–∞—â–∏—Ç—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –æ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏–∑–≤–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º **API Key**. –ì–µ–π—Ç–≤–µ–π –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª—é—á–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í —Ä–µ–∂–∏–º–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`make dev`) —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º –æ—Ç–∫—Ä—ã—Ç, –Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç—ã —Ñ–∞–µ—Ä–≤–æ–ª–æ–º.

--- FILE: docs/topics/Background-Tasks.md ---
# –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏ –û—á–µ—Ä–µ–¥–∏

> **‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è Legacy:**
> –í –ø—Ä–æ–µ–∫—Ç–µ **–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** –Ω–∞–¥–µ–∂–Ω—ã–π –±—Ä–æ–∫–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π (–≤—Ä–æ–¥–µ RabbitMQ –∏–ª–∏ Redis) –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è in-memory —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ **—Ç–µ—Ä—è—é—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ**.

## 1. Internal Stream (In-Memory Queue)

–í —Å–µ—Ä–≤–∏—Å–µ `club-api` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∞–º–æ–ø–∏—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.

*   **–ö–æ–¥:** `backend/apps/club-api/app/core/stream.py`
*   **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** `asyncio.deque` (Python Deque).
*   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∫–∞ SMS, Email, —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram.

### –†–∏—Å–∫–∏ –∏ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
1.  **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö:** –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —É–ø–∞–¥–µ—Ç –∏–ª–∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω (–¥–µ–ø–ª–æ–π), –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ (–Ω–µ–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ SMS/Email) **–∏—Å—á–µ–∑–Ω—É—Ç –Ω–∞–≤—Å–µ–≥–¥–∞**.
2.  **Retry Policy:** –ï—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–æ–≤ (`retry_error`). –ï—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–π —à–ª—é–∑ (SMS) –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∑–∞–¥–∞—á–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–æ –æ—á–µ—Ä–µ–¥–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π.

## 2. PgQueue (Event Bus)

–î–ª—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º **PostgreSQL LISTEN/NOTIFY**.

*   **–ö–æ–¥:** `backend/apps/club-api/app/core/pgqueue.py`
*   **–ö–∞–Ω–∞–ª:** `events`
*   **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
    1.  SQL-—Ç—Ä–∏–≥–≥–µ—Ä –∏–ª–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `NOTIFY events, payload`.
    2.  –§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å `PgQueue` –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
    3.  –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (—á–∞—Å—Ç–æ —ç—Ç–æ —Ä–∞—Å—Å—ã–ª–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ WebSocket).

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (`club-events`):
*   **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** in-memory –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á.
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: **Arq**, **Celery** –∏–ª–∏ **BullMQ** (–Ω–∞ –±–∞–∑–µ Redis).

--- FILE: docs/topics/Business-Rules.md ---
# –ù–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ (Hidden Gems)

–í —Ö–æ–¥–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É—é—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

## 1. –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Super Admins)

–í —Å–∏—Å—Ç–µ–º–µ `club-api` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, –∑–∞–≤—è–∑–∞–Ω–Ω—ã–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –≠—Ç–æ "—Å—É–ø–µ—Ä-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏", –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –æ—Ç—á–µ—Ç–∞–º –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –≤ –æ–±—Ö–æ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏.

**–ö–ª—é—á–µ–≤—ã–µ ID:**
*   `10069`: –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.
*   `10004`, `10298`, `10170`: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ ID —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.

**–ì–¥–µ —ç—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è:**
*   `backend/apps/club-api/app/routes/endpoints/report.py`: –î–æ—Å—Ç—É–ø –∫ –≤—ã–≥—Ä—É–∑–∫–µ –æ—Ç—á–µ—Ç–æ–≤.
*   `backend/apps/club-api/app/routes/endpoints/meetings.py`: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ –º–æ–¥—É–ª–µ –≤—Å—Ç—Ä–µ—á.
*   `backend/apps/club-api/app/helpers/push.py`: –°–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## 2. –°—Ç–∞—Ç—É—Å—ã —É—á–∞—Å—Ç–∏—è (`audit_status`)

–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `audit`. –•–æ—Ç—è –≤ –∫–æ–¥–µ –æ–Ω–æ –º–æ–∂–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏–µ:

*   **0 (`REGISTERED` / `WAITING`):** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–ü–æ–π–¥—É", –Ω–æ –µ–≥–æ —É—á–∞—Å—Ç–∏–µ –µ—â–µ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–µ.
*   **1 (`CONFIRMED`):** –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –∑–∞—è–≤–∫—É (–∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π).
*   **2 (`ATTENDED` / `VISITED`):** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–æ—Å–µ—Ç–∏–ª –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ (–æ—Ç–º–µ—Ç–∫–∞ —á–µ—Ä–µ–∑ QR-–∫–æ–¥).

> **–í–∞–∂–Ω–æ:** –î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º —Å–æ–±—ã—Ç–∏—è (—Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–ø–∏—Å–∏, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏) —á–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ–º `audit >= 1`.

## 3. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç–æ –∂–µ —Å–∞–º–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–∏—Å—Ç–µ–º–∞ `club-api` (–∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–π `club-events`) –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –±—ã—Ç—å –ø—Ä–æ—â–µ –∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ "–í—ã —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω—ã".

## 4. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Legacy)

–í —Å—Ç–∞—Ä–æ–π —á–∞—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã (`club-api`) email –∏ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.
*   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostgreSQL `pgcrypto`.
*   –í SQL-–∑–∞–ø—Ä–æ—Å–∞—Ö –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `pgp_sym_decrypt`.
*   –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥.

## 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –∏ –æ–ø–ª–∞—Ç–∞–º–∏ (Manual Billing)

–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã **–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–ª–∏–Ω–≥** –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —à–ª—é–∑–∞–º–∏ (Yookassa, Stripe –∏ –¥—Ä.).

*   **–ü—Ä–æ—Ü–µ—Å—Å:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–± –æ–ø–ª–∞—Ç–∞—Ö –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ —Ç–∞—Ä–∏—Ñ–æ–≤ –≤–≤–æ–¥—è—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏ **–≤—Ä—É—á–Ω—É—é** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`club-manager`).
*   **–õ–æ–≥–∏–∫–∞:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª–µ `paid_till` –≤ –ë–î –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞, –Ω–æ —Å–∞–º–æ —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞.
*   **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –∑–∞–≤—è–∑–∞–Ω–Ω–æ–≥–æ –Ω–∞ –æ–ø–ª–∞—Ç—É, —Å–ª–µ–¥—É–µ—Ç –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–∫—É—â–∏–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ `users`, –∑–∞–ø–æ–ª–Ω—è–µ–º—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏.

--- FILE: docs/topics/Database-Schema.md ---
# –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PostgreSQL** –≤–µ—Ä—Å–∏–∏ 15.

> **üí° –°–æ–≤–µ—Ç:**
> –î–ª—è –∏–∑—É—á–µ–Ω–∏—è —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDE, —Ç–∞–∫—É—é –∫–∞–∫ **DBeaver**, **DataGrip** –∏–ª–∏ **Postico**.
> –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ `localhost:5433` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `club_user`, –ø–∞—Ä–æ–ª—å `club_password`, –ë–î `club_db`) –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ ER-–¥–∏–∞–≥—Ä–∞–º–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ö–µ–º—ã (Schemas)

–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ö–µ–º–∞–º:

| –°—Ö–µ–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã |
|-------|----------|------------------|
| `public` | Legacy-—Ç–∞–±–ª–∏—Ü—ã –º–æ–Ω–æ–ª–∏—Ç–∞ | `users`, `events_users`, `crm_*` |
| `users` | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (New) | `user_profile`, `auth_logs` |
| `events` | –°–æ–±—ã—Ç–∏—è (New Architecture) | `event`, `speaker`, `registration` |
| `media` | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ | `file`, `image_variant` |

## –ö–ª—é—á–µ–≤—ã–µ —Å–≤—è–∑–∏ (Legacy)

–¢–∞–∫ –∫–∞–∫ `club-api` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—ã—Ä—ã–º SQL, —Å–≤—è–∑–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –æ—á–µ–≤–∏–¥–Ω—ã (–Ω–µ—Ç Foreign Keys –Ω–∞ —É—Ä–æ–≤–Ω–µ ORM).

*   **Users <-> Events:** –¢–∞–±–ª–∏—Ü–∞ `events_users` —Å–≤—è–∑—ã–≤–∞–µ—Ç `user_id` –∏ `event_id`.
*   **Users <-> Roles:** –†–æ–ª–∏ —á–∞—Å—Ç–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∏—Ç–æ–≤–æ–π –º–∞—Å–∫–µ –∏–ª–∏ –º–∞—Å—Å–∏–≤–µ —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ `users` (–ø–æ–ª–µ `roles` –∏–ª–∏ `permissions`).
--- FILE: docs/topics/Deployment.md ---
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (Deployment)

–ü—Ä–æ—Ü–µ—Å—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã (CI/CD) –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–µ **Bitbucket Pipelines**.

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Yandex Cloud)

*   **Production Environment:** –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã (VM) –≤ Yandex Cloud.
*   **Database:** Yandex Managed PostgreSQL (–∫–ª–∞—Å—Ç–µ—Ä).
*   **Container Registry:** Yandex Container Registry (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è Docker-–æ–±—Ä–∞–∑–æ–≤).

## –ü–∞–π–ø–ª–∞–π–Ω (Pipeline Overview)

–ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ `bitbucket-pipelines.yml`.

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã:

1.  **Build & Test:**
    *   –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–æ–≤ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.
    *   –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–æ–≤ (Ruff, Mypy) –∏ —Ç–µ—Å—Ç–æ–≤ (Pytest).
2.  **Push:**
    *   –°–æ–±—Ä–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã –ø—É—à–∞—Ç—Å—è –≤ Container Registry —Å —Ç–µ–≥–æ–º –∫–æ–º–º–∏—Ç–∞.
3.  **Deploy:**
    *   –ü–∞–π–ø–ª–∞–π–Ω –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH.
    *   –û–±–Ω–æ–≤–ª—è–µ—Ç `docker-compose.yml` (–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è).
    *   –í—ã–ø–æ–ª–Ω—è–µ—Ç `docker-compose pull` –∏ `docker-compose up -d`.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Legacy
–î–ª—è —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ `club-api` –¥–µ–ø–ª–æ–π –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø–æ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ: `git pull` –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ systemd —é–Ω–∏—Ç–æ–≤ –∏–ª–∏ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`DB_PASSWORD`, `API_KEY`, `JWT_SECRET`) **–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**.

*   **–í CI/CD:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–∞–∫ Repository Variables –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Bitbucket.
*   **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (Runtime):** –•—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Git. –≠—Ç–æ—Ç —Ñ–∞–π–ª –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –ø—Ä–æ–µ–∫—Ç–µ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è** –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–±–æ—Ä–∞ –æ—à–∏–±–æ–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (Sentry, Firebase Analytics, New Relic –∏ —Ç.–¥.).

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —è–≤–ª—è—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–∏—à—É—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ (`stdout/stderr`).

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫)
docker logs -f --tail 100 club-events_app

# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs -f --tail 50
```

### –û—Ç–ª–∞–¥–∫–∞ –æ—à–∏–±–æ–∫ (Crash Reporting)
–¢–∞–∫ –∫–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–ø–æ—Ä—Ç–∏–Ω–≥–∞ –Ω–µ—Ç, –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω" –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–ª–∏ 500 –æ—à–∏–±–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ä–µ–º—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏.
2. –í—Ä—É—á–Ω—É—é –∏—Å–∫–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∞—Ö Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ Nginx (–µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—à–µ–ª –¥–æ –±—ç–∫–µ–Ω–¥–∞).

--- FILE: docs/topics/Event-Registration-Flow.md ---
# –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ

–í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—É—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–π–¥—É" –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–æ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL.

## –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```mermaid
sequenceDiagram
    autonumber
    actor User as Mobile App (Client)
    participant GW as Gateway (BFF)
    participant API as Club API (Legacy)
    participant DB as PostgreSQL
    participant Worker as Notification Worker

    User->>GW: POST /api/events/{id}/register
    Note right of User: Header: Authorization <token>
    
    rect rgb(240, 240, 240)
        note right of GW: Auth Middleware
        GW->>GW: Validate Session (Redis)
        GW->>GW: Extract User ID
    end
    
    GW->>API: POST /internal/events/{id}/join (X-User-ID)
    
    API->>DB: Check Event Status & Slots
    alt Event Full
        API-->>User: 409 Conflict (Sold Out)
    else Success
        API->>DB: INSERT INTO events_users (audit=0)
        DB-->>API: Success
        
        par Async Notifications
            API->>DB: NOTIFY "events" payload
            DB->>Worker: Trigger PgQueue
            Worker->>User: Send Push "You are registered"
        end
        
        API-->>User: 200 OK {status: "registered"}
    end
```

## 1. –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (Mobile App)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è" –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å–æ–±—ã—Ç–∏—è.
*   **Source:** `club-client`
*   **Target:** `club-gateway-m` (–ø–æ—Ä—Ç 8004 –≤ dev)
*   **Payload:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –º–µ—Ç–æ–¥–∞ (REST –≤ legacy –∏–ª–∏ GraphQL –≤ –±—É–¥—É—â–µ–º).
*   **Auth Header:** `Authorization: Bearer <session_token>`

## 2. –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Gateway (`club-gateway-m`)

–ì–µ–π—Ç–≤–µ–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (BFF):
1.  **Auth Middleware:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –≤ Redis.
2.  **Context Injection:** –ò–∑–≤–ª–µ–∫–∞–µ—Ç `user_id` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-User-ID`.
3.  **Routing:** –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å `club-api` (–ø–æ—Ä—Ç 8000).

## 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ `club-api` (Legacy Core)

–ó–∞–ø—Ä–æ—Å –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `backend/apps/club-api/app/routes/endpoints/event.py`.

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏—è:** –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ `event_id` –∏ –æ—Ç–∫—Ä—ã—Ç–∞ –ª–∏ –µ—â–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.
2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:** –ù–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
3.  **–ó–∞–ø–∏—Å—å –≤ –ë–î:** –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–ø–∏—Å–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –º–æ–¥—É–ª–µ `app/models/user.py` (–º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å —É—á–∞—Å—Ç–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è). –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `INSERT` –≤ —Ç–∞–±–ª–∏—Ü—É —Å–≤—è–∑–µ–π `events_users`.

## 4. –°–ª–æ–π –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (PostgreSQL)

*   **–¢–∞–±–ª–∏—Ü–∞:** `events_users`
*   **–ü–æ–ª—è:**
    *   `event_id`: ID –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.
    *   `user_id`: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `audit`: –°—Ç–∞—Ç—É—Å (0 - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, 1 - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω).
    *   `time_create`: –í—Ä–µ–º—è –∑–∞–ø–∏—Å–∏.

## 5. –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (Side Effects)

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ –ë–î –º–æ–≥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:

*   **Postgres NOTIFY:** –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª —á–µ—Ä–µ–∑ `LISTEN/NOTIFY`.
*   **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –°–µ—Ä–≤–∏—Å `club-api` (—á–µ—Ä–µ–∑ `app/helpers/push.py`) –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø—É—à–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ —Å–∞–º–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
*   **Email:** –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ –ø–æ—á—Ç—É.
--- FILE: docs/topics/File-Storage.md ---
# –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (Club Media)

–°–µ—Ä–≤–∏—Å `club-media` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–≥—Ä—É–∑–∫—É, –æ–±—Ä–∞–±–æ—Ç–∫—É (—Ä–µ—Å–∞–π–∑) –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (–∞–≤–∞—Ç–∞—Ä–∫–∏, –∏–∫–æ–Ω–∫–∏ —Å–æ–±—ã—Ç–∏–π, —Ñ–æ—Ç–æ –æ—Ç—á–µ—Ç–æ–≤).

> **‚ö†Ô∏è Legacy Warning:**
> –°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø—Ä—è–º—É—é –∑–∞–ø–∏—Å—å –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** —Å–µ—Ä–≤–µ—Ä–∞. S3 –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è**.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø—É—Ç—è–º, –∂–µ—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã–º –≤ –∫–æ–¥–µ (`backend/apps/club-media/app/routes/endpoints/file.py`).

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

| –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ | –ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ | –ü—É–±–ª–∏—á–Ω—ã–π URL |
|--------------|-----------------|---------------|
| –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `/var/www/media.clubgermes.ru/html/avatars/` | `https://media.clubgermes.ru/avatars/{id}.jpg` |
| –ò–∫–æ–Ω–∫–∏ —Å–æ–±—ã—Ç–∏–π | `/var/www/static.clubgermes.ru/html/events/{id}/` | `https://static.clubgermes.ru/events/{id}/icon.png` |
| –§–æ—Ç–æ –Ω–æ–≤–æ—Å—Ç–µ–π | `/var/www/static.clubgermes.ru/html/news/{id}/` | `https://static.clubgermes.ru/news/{id}/img.jpg` |
| –ù–æ–≤—ã–µ –º–µ–¥–∏–∞ (UUID) | `/var/www/media.clubgermes.ru/html/n/` | `https://media.clubgermes.ru/n/{hash}.jpg` |

## –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

1.  **Auth:** –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω. –°–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å –∫ `https://eta.clubgermes.ru:5007` (Auth Service).
2.  **Processing:** –ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π **Pillow (PIL)**:
    *   –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ JPEG/PNG.
    *   –†–µ—Å–∞–π–∑ (thumbnail) –¥–æ 320x320 –∏–ª–∏ 200x200.
3.  **Storage:** –§–∞–π–ª –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ —á–µ—Ä–µ–∑ `aiofiles`.

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–¢–∞–∫ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –ø—ã—Ç–∞–µ—Ç—Å—è –ø–∏—Å–∞—Ç—å –≤ `/var/www/...`, –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ macOS/Windows –±–µ–∑ –ø—Ä–∞–≤ root –∏–ª–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–∞–ø–æ–∫ **–ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–µ**.

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:**
1.  –°–æ–∑–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –¥–∞—Ç—å –ø—Ä–∞–≤–∞ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
    ```bash
    sudo mkdir -p /var/www/media.clubgermes.ru/html/avatars
    sudo mkdir -p /var/www/static.clubgermes.ru/html/events
    sudo chown -R $(whoami) /var/www/
    ```
2.  –ò–ª–∏ (–ª—É—á—à–µ) –∏–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç–∏ –≤ –∫–æ–¥–µ –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞).

--- FILE: docs/topics/Legacy-Internals.md ---
# –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Legacy (club-api)

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å—Ç–∞—Ä–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–∞ `club-api`. –ù–æ–≤—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (Tortoise ORM, DI), –Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–Ω–∏–º–∞—Ç—å —ç—Ç–∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã.

–í `club-api` **–Ω–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π ORM** (–∫–∞–∫ SQLAlchemy). –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∞–º–æ–ø–∏—Å–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ –¥—Ä–∞–π–≤–µ—Ä–æ–º `asyncpg`.

## 1. –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (`PgBank`)

–í–µ—Å—å –¥–æ—Å—Ç—É–ø –∫ –ë–î –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ `api` –∏–ª–∏ `request.app`).

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:** `backend/apps/club-api/app/core/pg.py`

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

–í–º–µ—Å—Ç–æ –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Å—Å–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—ã—Ä—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã. –ü—Ä–∏–º–µ—Ä —Ç–∏–ø–∏—á–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:

```python
async def get_user_data(request):
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ request.app)
    api = request.app
    user_id = 100 

    # 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict-like Record)
    user = await api.pg.club.fetchrow(
        "SELECT * FROM users WHERE id = $1", 
        user_id
    )

    # 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–æ–∫
    events = await api.pg.club.fetch(
        "SELECT * FROM events WHERE active = $1",
        True
    )

    # 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
    count = await api.pg.club.fetchval("SELECT count(*) FROM users")

    # 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (–±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö)
    await api.pg.club.execute(
        "UPDATE users SET active = $1 WHERE id = $2",
        False, user_id
    )
    
    return {"user": user, "count": count}
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ `PgBank`
1.  **JSONB:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª—è —Ç–∏–ø–∞ `jsonb` (–∏—Å–ø–æ–ª—å–∑—É—è –±—ã—Å—Ç—Ä—ã–π `orjson`). –ù–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å `json.loads()` –≤—Ä—É—á–Ω—É—é.
2.  **Timestamps:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `datetime` –≤ timestamp (int) –∏ –æ–±—Ä–∞—Ç–Ω–æ.
3.  **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** –ï—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞–≤–∏—Å—à–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ç–∞–π–º-–∞—É—Ç `MAX_TRANSACTION_TIME`).

---

## 2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π (`PgQueue`)

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **PostgreSQL LISTEN/NOTIFY** –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–π).

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:** `backend/apps/club-api/app/core/pgqueue.py`

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1.  **–¢—Ä–∏–≥–≥–µ—Ä –≤ –ë–î:** –ö–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –≤–∞–∂–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, —Ç—Ä–∏–≥–≥–µ—Ä (–∏–ª–∏ —Ö—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞) –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL-–∫–æ–º–∞–Ω–¥—É:
    ```sql
    NOTIFY events, '{"type": "new_registration", "user_id": 123}';
    ```
2.  **–°–ª—É—à–∞—Ç–µ–ª—å (`PgQueue`):** –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–Ω–∞–ª `events` —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `asyncpg_listen`.
3.  **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:**
    *   –ü–æ–ª—É—á–∞–µ—Ç JSON-–ø–µ–π–ª–æ–∞–¥.
    *   –ò–º–µ–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç —Å–ø–∞–º–∞ ("debounce"): –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–µ —á–∞—â–µ, —á–µ–º —Ä–∞–∑ –≤ 2 —Å–µ–∫—É–Ω–¥—ã (`sleep(2)`).
    *   –í—ã–∑—ã–≤–∞–µ—Ç callback-—Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –¥–∞–ª—å—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ WebSocket –∏–ª–∏ Push-—Å–µ—Ä–≤–∏—Å).

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `NOTIFY` –≤ –∫–∞–Ω–∞–ª `events`.
2.  –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `app/models/notification.py` (–∏–ª–∏ —Ç–æ–º –º–µ—Å—Ç–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ callback –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏).

---

## 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`.toml`)

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö `.env` —Ñ–∞–π–ª–æ–≤, legacy-—Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **TOML-—Ñ–∞–π–ª—ã** –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/apps/club-api/app/config/*.toml`

*   `settings.toml` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
*   `pg.toml` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
*   `info.toml` ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–∞.

> **–í–Ω–∏–º–∞–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞ –≤ –∫–æ—Ä–Ω–µ –º–æ–∂–µ—Ç **–Ω–µ –ø–æ–≤–ª–∏—è—Ç—å** –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `club-api`, –µ—Å–ª–∏ –æ–Ω–∏ –∂–µ—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –≤ TOML. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `app/config/`.

---

## 4. –ö–∞—Å—Ç–æ–º–Ω—ã–π —É–ø–∞–∫–æ–≤—â–∏–∫ (`Packager`)

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—ç—à–µ–º –≤ Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:** `backend/apps/club-api/app/utils/packager.py`

*   **–§–æ—Ä–º–∞—Ç:** –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–∞—Ö —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º —Ç–∏–ø–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `type:gzip:base64_data`.
*   **–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Redis –Ω–µ —Å–º–æ–≥—É—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ.
*   **–†–µ—à–µ–Ω–∏–µ:** –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∫—ç—à legacy-—Å–µ—Ä–≤–∏—Å–∞ –∏–∑ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞, –ø—Ä–∏–¥–µ—Ç—Å—è –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏ –∏–∑ `packager.py`.

---

## 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è WebSockets

WebSocket-—Å–µ—Ä–≤–µ—Ä –≤ `club-api` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å —Å–µ—Ä—å–µ–∑–Ω—ã–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º.

**–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:** `backend/apps/club-api/app/core/api.py`

*   **Stateful:** –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ Python (`self.store['websockets']`).
*   **–ù–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è:** –ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `club-api` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Kubernetes), –æ–Ω–∏ **–Ω–µ –±—É–¥—É—Ç –∑–Ω–∞—Ç—å** –æ —Å–æ–∫–µ—Ç–∞—Ö –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
    *   *–°—Ü–µ–Ω–∞—Ä–∏–π —Å–±–æ—è:* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ò–Ω—Å—Ç–∞–Ω—Å—É 1. –¢—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤ –ò–Ω—Å—Ç–∞–Ω—Å–µ 2. –ò–Ω—Å—Ç–∞–Ω—Å 2 –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ê, –Ω–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –µ–≥–æ –≤ —Å–≤–æ–µ–π –ø–∞–º—è—Ç–∏. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è.
## 6. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö:

### –ù–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (club-events)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–∏–≥—Ä–∞—Ü–∏–π **Aerich** (–¥–ª—è Tortoise ORM). –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ —Å–µ—Ä–≤–∏—Å–∞ –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ CLI.

### Legacy (club-api)
–î–ª—è —Å—Ç–∞—Ä–æ–≥–æ –º–æ–Ω–æ–ª–∏—Ç–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**.
*   **–ú–µ—Ç–æ–¥:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã (CREATE TABLE, ALTER TABLE) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–≤—Ä—É—á–Ω—É—é** —á–µ—Ä–µ–∑ SQL-–∫–æ–Ω—Å–æ–ª—å (psql) –∏–ª–∏ GUI-–∫–ª–∏–µ–Ω—Ç—ã (DBeaver).
*   **–ü–æ—Ä—è–¥–æ–∫:** –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –∫–æ–¥–∞, —Ç—Ä–µ–±—É—é—â–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ SQL-—Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-–±–∞–∑–µ.
*   **–†–∏—Å–∫–∏:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π —Å—Ö–µ–º—ã –ë–î —Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å SQL-—Å–∫—Ä–∏–ø—Ç—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–∞–ø–∫–µ `infrastructure/postgres/` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏.

--- FILE: docs/topics/Manager-Architecture.md ---
# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –∫–∞–∫ **SPA** (Single Page Application) —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Å–ª–æ—è –¥–∞–Ω–Ω—ã—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ (`src/`)

```text
src/
‚îú‚îÄ‚îÄ components/     # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Avatar, Charts, Inputs)
‚îú‚îÄ‚îÄ data/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —Å–ø–∏—Å–∫–∏)
‚îú‚îÄ‚îÄ helpers/        # –£—Ç–∏–ª–∏—Ç—ã –∏ —è–¥—Ä–æ –ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ request.ts    # –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ XHR –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ websocket.ts  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ entity.ts     # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ collector.ts  # –ú–µ–Ω–µ–¥–∂–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ layouts/        # –û–±–µ—Ä—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü (Main, Auth, Error)
‚îú‚îÄ‚îÄ libs/           # –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ Router/       # –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ queries/        # –û–ø–∏—Å–∞–Ω–∏—è API —ç–Ω–ø–æ–∏–Ω—Ç–æ–≤ (–ü–∞—Ç—Ç–µ—Ä–Ω "Query Object")
‚îú‚îÄ‚îÄ routes/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îú‚îÄ‚îÄ stores/         # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ Svelte —Å—Ç–æ—Ä—ã
‚îî‚îÄ‚îÄ views/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—ç–∫—Ä–∞–Ω—ã)
```

## Data Flow (–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö)

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω **Entity/Collector**.

1.  **Queries (`src/queries/`)**: –ó–¥–µ—Å—å –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ—Ç–æ–¥—ã –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏—è. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –æ–±—ä–µ–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ `model` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ `retriever` (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞).
2.  **Entity (`src/helpers/entity.ts`)**: –ö–ª–∞—Å—Å-–æ–±–µ—Ä—Ç–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç `Query` —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ (`loading store`).
3.  **Collector (`src/helpers/collector.ts`)**: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤. –í–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞ API, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∑–∞–¥–∞—á–∏ –≤ `collector.get()`.
4.  **Transport (`src/helpers/request.ts`)**: –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ **XMLHttpRequest**.
    *   **–í–Ω–∏–º–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `XMLHttpRequest`, –∞ –Ω–µ `fetch` –∏–ª–∏ `axios`.
    *   –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ `x-binding-*`.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ):

```typescript
/* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Entity */
const userSearchHandler = new Entity({
    model: userSearch.model,
    retriever: userSearch.retriever,
    onSuccess: (data) => { /* –æ–±—Ä–∞–±–æ—Ç–∫–∞ */ }
});

/* –í—ã–∑–æ–≤ —á–µ—Ä–µ–∑ Collector */
function get() {
    collector.get([
        [ userSearchHandler, { filter: '...' } ]
    ]);
}
```

## State Management

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–µ **Svelte Stores**:
*   `src/stores/user.ts`: –î–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage.
*   `src/stores/token.ts`: –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
*   `src/stores/states.ts`: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ (loading, connect, api urls).
--- FILE: docs/topics/Manager-Auth.md ---
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## –ü—Ä–æ—Ü–µ—Å—Å –≤—Ö–æ–¥–∞

1.  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/auth` (`src/views/Login.svelte`).
2.  –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã –∏–∑ `src/queries/auth.ts`:
    *   `userSetCode` (–∑–∞–ø—Ä–æ—Å SMS/Email –∫–æ–¥–∞).
    *   `userLogin` (–≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é).
    *   `userValidateCode` (–≤—Ö–æ–¥ –ø–æ –∫–æ–¥—É).
3.  –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `_token` –∏ `_user`.

## –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

*   **–¢–æ–∫–µ–Ω:** –•—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º.
    *   –ö–ª—é—á: `___:token` (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `src/helpers/storage.ts`).
    *   –ü—Ä–∏ –∫–∞–∂–¥–æ–º `XMLHttpRequest` —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ–ª–µ `_token`), –∞ –Ω–µ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ Authorization (–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `src/helpers/request.ts`).
    *   –í GraphQL –∑–∞–ø—Ä–æ—Å–∞—Ö —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: TOKEN ...`.

## WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`src/helpers/auth.ts` -> `init()`):
1.  –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å `VITE_WSO_URL`.
2.  –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ `register` —Å —Ç–æ–∫–µ–Ω–æ–º.
3.  –°–µ—Ä–≤–µ—Ä —à–ª–µ—Ç —Å–æ–±—ã—Ç–∏—è (`message`), –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `src/helpers/notifications.ts`.

## –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å (Client-side)

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ `src/layouts/Main/index.svelte` –∏ Guards.
*   –†–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ `$user.roles`.
*   –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ–ª–∏: `admin`, `manager`, `moderator`, `chief`, `community manager`.
--- FILE: docs/topics/Manager-Hidden-Gems.md ---
# üíé Hidden Gems & Technical Debt

–†–∞–∑–¥–µ–ª –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, —Ö–∞—Ä–¥–∫–æ–¥ –∏ –º–µ—Å—Ç–∞, —Ç—Ä–µ–±—É—é—â–∏–µ –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è.

## 1. –•–∞—Ä–¥–∫–æ–¥ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (Hardcoded User IDs)

–í –∫–æ–¥–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ —Ä–æ–ª—è–º, –Ω–æ –∏ **–Ω–∞–ø—Ä—è–º—É—é –ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥.

*   **–§–∞–π–ª:** `src/views/Home.svelte`
    *   `ifMegaAccess`: ID `10069`, `8000`, `10298`, `10170` –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ –æ—Ç—á–µ—Ç–∞–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ò–ò.
    *   `ifBossAccess`: ID `10069`, `10170` (–ø–æ–º–∏–º–æ –∞–¥–º–∏–Ω–æ–≤).
    *   –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `organizer`: ID `10094`.
*   **–§–∞–π–ª:** `src/views/Users.svelte`
    *   –õ–æ–≥–∏–∫–∞ `ifAccessToUpdateRating`: ID `10069` –∏–º–µ–µ—Ç –æ—Å–æ–±—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤.

**–†–∏—Å–∫:** –ü—Ä–∏ —Å–º–µ–Ω–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–ª–∏ –¥–∞–¥—É—Ç –¥–æ—Å—Ç—É–ø –Ω–µ —Ç–µ–º –ª—é–¥—è–º.

## 2. –ö–∞—Å—Ç–æ–º–Ω—ã–π Router

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∞–º–æ–ø–∏—Å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –≤ `src/libs/Router`.
*   **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `History API`, –Ω–æ –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ Query Params –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ –ø—É—Ç—è—Ö) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤—Ä—É—á–Ω—É—é.
*   **–†–∏—Å–∫:** –ú–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–∏—á–∏ (nested routes, lazy loading) —Ç–∞–∫, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∏ —Å–ª–æ–∂–µ–Ω –≤ –æ—Ç–ª–∞–¥–∫–µ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

## 3. XMLHttpRequest –≤–º–µ—Å—Ç–æ Fetch

–í `src/helpers/request.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `XMLHttpRequest`.
*   –≠—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥. –û–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `Promises` –Ω–∞—Ç–∏–≤–Ω–æ (—Ö–æ—Ç—è –æ–±–µ—Ä–Ω—É—Ç –≤ Promise –≤—Ä—É—á–Ω—É—é).
*   –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–¥—ã (`timeoutException`, `abortException`).

## 4. "Entity" Pattern

–í—Å—è —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ —Å–≤—è–∑–∫—É `Entity` + `Collector`.
*   –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ—è–≤–Ω—É—é –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤.
*   –î–∞–Ω–Ω—ã–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑–æ–≤–∞ (–∫–∞–∫ `await fetch()`), –∞ –æ–±–Ω–æ–≤–ª—è—é—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–Ω—É—Ç—Ä–∏ `Entity`. –≠—Ç–æ "Reactive" –ø–æ–¥—Ö–æ–¥, –Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—Ä—É—á–Ω—É—é.

## 5. –ü—Ä–µ—Ñ–∏–∫—Å—ã –≤ LocalStorage

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö–µ–ª–ø–µ—Ä `src/helpers/storage.ts`, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å `___` –∫–æ –≤—Å–µ–º –∫–ª—é—á–∞–º –∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø `number`, `boolean` –∏ —Ç.–¥. –≤ —Å—Ç—Ä–æ–∫–µ –≤–∏–¥–∞ `number|123`).
--- FILE: docs/topics/Manager-Overview.md ---
# Club Manager: –û–±–∑–æ—Ä –∏ –°—Ç–µ–∫

**Club Manager** ‚Äî —ç—Ç–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ö–ª—É–±–æ–º (–∫–ª–∏–µ–Ω—Ç–∞–º–∏, —Å–æ–±—ã—Ç–∏—è–º–∏, –≤—Å—Ç—Ä–µ—á–∞–º–∏). –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –∫–∞–∫ –≥–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –æ–Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —Ç–∞–∫ –∏ –≤ –≤–∏–¥–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ –Ω–∞ –±–∞–∑–µ Svelte 4 –∏ TypeScript, —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–π –≤ Tauri.

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| **Core** | **Svelte** | 4.x | –û—Å–Ω–æ–≤–Ω–æ–π UI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫. |
| **Build Tool** | **Vite** | 5.x | –°–±–æ—Ä—â–∏–∫ –∏ Dev-—Å–µ—Ä–≤–µ—Ä. |
| **Language** | **TypeScript** | 5.x | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è. |
| **Desktop Runtime** | **Tauri** | 2.0 (Beta) | –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (macOS, Windows, Linux). |
| **Mobile Runtime** | **Capacitor** | 7.x | (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ –ø–æ–¥ Android/iOS. |
| **Styling** | **TailwindCSS** | 3.x | –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã. |
| **UI Kit** | **DaisyUI** | 4.x | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–≤–µ—Ä—Ö Tailwind (—Ç–µ–º–∞ `emerald`). |

## –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—è–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫:

*   **Routing:** –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (`src/libs/Router`). –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `svelte-routing` –∏–ª–∏ `svelte-kit`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Layouts –∏ Guards.
*   **State Management:** –ù–∞—Ç–∏–≤–Ω—ã–µ **Svelte Stores** (`writable`, `readable`, `derived`).
*   **Charts:** `chart.js` + `chartjs-plugin-datalabels` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –≤–æ—Ä–æ–Ω–æ–∫ –ø—Ä–æ–¥–∞–∂.
*   **Date Picker:** `date-picker-svelte`.

## –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –û–° (Tauri)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Tauri API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π:
*   **Shell:** –î–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—Å—ã–ª–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
*   **Notification:** –ù–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –û–°.
*   **Window:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞–º–∏ (—Ä–∞–∑–º–µ—Ä—ã, –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º).
*   **Updater:** (–í –ø–ª–∞–Ω–∞—Ö/—á–∞—Å—Ç–∏—á–Ω–æ) –ú–µ—Ö–∞–Ω–∏–∑–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

> **–í–∞–∂–Ω–æ:** –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Tauri 2.0 Beta, —á—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏ –≤–µ—Ä—Å–∏–∏ 1.x.
--- FILE: docs/topics/Manager-Setup.md ---
# –ó–∞–ø—É—Å–∫ –∏ –°–±–æ—Ä–∫–∞

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `club-manager` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–±–æ—Ä–∫–∏ —Ä–µ–ª–∏–∑–æ–≤.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   **Node.js** 20+
*   **Rust** (–ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è) ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∫–∏ Tauri.
*   **XCode** (–¥–ª—è macOS) –∏–ª–∏ **C++ Build Tools** (–¥–ª—è Windows) ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Tauri.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Vite, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `VITE_`.

1.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env.local` (—ç—Ç–æ—Ç —Ñ–∞–π–ª –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è git).
2.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ URL-–∞–¥—Ä–µ—Å–∞ API:

```bash
VITE_API_URL=http://localhost:8000       # –û—Å–Ω–æ–≤–Ω–æ–π REST API
VITE_WSO_URL=ws://localhost:8000         # WebSocket —Å–µ—Ä–≤–µ—Ä
VITE_MEDIA_URL=http://localhost:8005     # –ú–µ–¥–∏–∞-—Å–µ—Ä–≤–µ—Ä (–∞–≤–∞—Ç–∞—Ä–∫–∏, —Ñ–∞–π–ª—ã)
VITE_GRAPHQL_URL=http://localhost:8003   # GraphQL API
```

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –†–µ–∂–∏–º –±—Ä–∞—É–∑–µ—Ä–∞ (–±—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–µ—Ä–≤–µ—Ä. –ù–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Tauri –±—É–¥—É—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–ª–∏ –∑–∞–º–æ–∫–∞–Ω—ã.

```bash
npm install
npm run dev
```
–î–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:1420`

### –†–µ–∂–∏–º Desktop (Tauri)
–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º –æ–∫–Ω–µ. –¢—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Rust-—á–∞—Å—Ç–∏.

```bash
npm run tauri dev
```

## –°–±–æ—Ä–∫–∞ Production

–°–±–æ—Ä–∫–∞ —Å–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–ª–¥ –∏ –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä—ã (dmg, exe, deb).

```bash
npm run tauri build
```

–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –≤:
*   `src-tauri/target/release/bundle/`

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Å–±–æ—Ä–∫–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.exe`) –∫–æ–º–∞–Ω–¥—É –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –û–° –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CI/CD.
--- FILE: docs/topics/Mobile-Architecture.md ---
# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Mobile Client

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ `club-manager`, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ –∫–æ–º–ø–∞–Ω–∏–∏ (Service-Oriented Frontend).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

*   `src/libs/Router/` ‚Äî –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ä–æ—É—Ç–µ—Ä.
*   `src/queries/` ‚Äî –°–ª–æ–π API (–æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤).
*   `src/helpers/` ‚Äî "–î–≤–∏–∂–æ–∫" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`entity.ts`, `collector.ts`, `request.ts`).
*   `src/views/` ‚Äî –≠–∫—Ä–∞–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   `src/components/` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

## Navigation

–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∏ `React Navigation`, –Ω–∏ `Expo Router`.
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä** –Ω–∞ –±–∞–∑–µ History API:
*   –§–∞–π–ª: `src/libs/Router/router.ts`.
*   –ö–ª–∞—Å—Å `Router` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–µ–∫–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π.
*   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `<RouterView />` –≤ `App.svelte` —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.
*   –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç "–ì–∞—Ä–¥—ã" (`guards.ts`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

## API Layer & Data Flow

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω **Entity + Collector**.
*   **Collector** (`src/helpers/collector.ts`) —Å–æ–±–∏—Ä–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ –æ—á–µ—Ä–µ–¥—å.
*   **Request** (`src/helpers/request.ts`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `XMLHttpRequest` (–Ω–µ `fetch`).
*   –õ–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–Ω–µ—Å–µ–Ω–∞ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ñ–∞–π–ª—ã `queries/*.ts`.

**–ü—Ä–∏–º–µ—Ä:**
```typescript
/* src/views/Home/Home.svelte */
const eventsFeedHandler = new Entity({
    model: eventsFeed.model,
    retriever: eventsFeed.retriever, // –õ–µ–∂–∏—Ç –≤ queries/event.ts
    onSuccess: (data) => { /* update store */ }
});

/* –í—ã–∑–æ–≤ */
collector.get([ [eventsFeedHandler, { ...params }] ]);
```

## State Management

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **Svelte Stores**:
*   `src/stores/user.ts`: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   `src/stores/token.ts`: –¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
*   `src/stores/states.ts`: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI (loading, safe-areas).
--- FILE: docs/topics/Mobile-Auth.md ---
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–ú–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤—ã—Ö —á–ª–µ–Ω–æ–≤ –∫–ª—É–±–∞ –∏ –ø—Ä–∏–≤—è–∑–∫—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## –≠–∫—Ä–∞–Ω –í—Ö–æ–¥–∞ (Login)

–≠–∫—Ä–∞–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `src/views/Login/Login.svelte`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—Ö–æ–¥–∞, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ —Ç–∞–±—ã.

### 1. –í—Ö–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ / Email
–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø–∞—Ä–æ–ª—è.

**–®–∞–≥ 1: –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö**
![Login Phone](auth-login-step1-phone.png) { width="200" }

**–®–∞–≥ 2: –í–≤–æ–¥ –∫–æ–¥–∞**
*(–°–∫—Ä–∏–Ω—à–æ—Ç –≤–≤–æ–¥–∞ –∫–æ–¥–∞)*

1.  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä –∏–ª–∏ Email.
2.  –ù–∞–∂–∏–º–∞–µ—Ç **"–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥"**.
3.  –ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `POST /login/mobile` (–∏–ª–∏ `/email`).
4.  –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç OTP (One Time Password).
5.  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥, –∫–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `POST /login/mobile/validate`.

### 2. –í—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —É—Å—Ç–∞–Ω–æ–≤–∏–≤—à–∏–º–∏ –ø–∞—Ä–æ–ª—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ.

![Login Password](auth-login-step1-password.png) { width="200" }

*   –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `POST /login`.
*   –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` —Å –∫–ª—é—á–æ–º `___:token`.

## –ü–æ—Å—Ç-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (Post-Login)

–°—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ (–≤ `src/helpers/auth.ts`) –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1.  **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:** –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`_user` –∏–∑ –æ—Ç–≤–µ—Ç–∞) –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π Svelte Store (`user.push(data._user)`).
2.  **WebSocket:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `websocket.establish()`. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
3.  **–†–µ–¥–∏—Ä–µ–∫—Ç:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `src/App.svelte` —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ `user.id`. –ö–∞–∫ —Ç–æ–ª—å–∫–æ ID —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
    *   –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (`onLogin`), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç —Ç—É–¥–∞.
    *   –ò–Ω–∞—á–µ ‚Äî –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (`/`).

## –≠–∫—Ä–∞–Ω –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `src/views/Registration/Registration.svelte`. –≠—Ç–æ –µ–¥–∏–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞.

![Registration Screen](auth-registration-form.png) { width="200" }

**–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ (`POST /new/register`):**
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ B2B —Å–µ–≥–º–µ–Ω—Ç, –ø–æ—ç—Ç–æ–º—É –ø–æ–º–∏–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∏–∑–Ω–µ—Å–µ:
*   `name` ‚Äî –§–ò–û.
*   `company` ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏.
*   `position` ‚Äî –î–æ–ª–∂–Ω–æ—Å—Ç—å.
*   `annual` ‚Äî –ì–æ–¥–æ–≤–æ–π –æ–±–æ—Ä–æ—Ç.
*   `employees` ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
*   `catalog` ‚Äî –û—Ç—Ä–∞—Å–ª–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
*   `interests` ‚Äî –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞:**
1.  **–î–≤–æ–π–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ Email, –∏ –¢–µ–ª–µ—Ñ–æ–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
2.  –ö–Ω–æ–ø–∫–∞ **"–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥—ã"** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å `POST /new/validate`, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É OTP –Ω–∞ –æ–±–∞ –∫–∞–Ω–∞–ª–∞ —Å–≤—è–∑–∏.
3.  –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –æ–±–æ–∏—Ö –∫–æ–¥–æ–≤ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ **"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"**.

## Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

![Push Permission](auth-push-notification-permission-prompt.png) { width="200" }

*   **–õ–æ–≥–∏–∫–∞:** `src/App.svelte` -> `setupFCM()`.
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** FCM-—Ç–æ–∫–µ–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥ —á–µ—Ä–µ–∑ `POST /register/device`.
*   **–û–±—Ä–∞–±–æ—Ç–∫–∞:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –ø—É—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `router.go()` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —Ä–∞–∑–¥–µ–ª—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ —Å–æ–±—ã—Ç–∏—é).

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏ –î–æ–ª–≥

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API.
*   –ë—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ –ø–æ–ª–µ `_alert`.
*   –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —Å–ª–æ–π (`src/helpers/request.ts`) –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ –ø–æ–ª–µ.
*   –°–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —à–∏–Ω—É `alertsPush`.
*   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `src/components/Alerts` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –≤–∏–¥–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Toast) –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞.

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
*   **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–µ Regex –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (`[\d\s\(\)\-]{10,20}`). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–≤–æ–¥–∏—Ç—å –Ω–æ–º–µ—Ä–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ LocalStorage (WebView), –∞ –Ω–µ –≤ SecureStore —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
*   **–•–∞—Ä–¥–∫–æ–¥:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π "–ö–æ–º–ø–∞–Ω–∏—è" –∏ "–û–±–æ—Ä–æ—Ç" –∑–∞—à–∏—Ç–∞ –≤ –∫–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —á—Ç–æ –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.
--- FILE: docs/topics/Mobile-Events.md ---
# üìÖ –†–∞–∑–¥–µ–ª ¬´–°–æ–±—ã—Ç–∏—è¬ª (Events)

**–§–∞–π–ª:** `src/views/Events/Events.svelte`
**–ú–∞—Ä—à—Ä—É—Ç:** `/events`

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—á–∞—Å—Ç–∏—è –≤ –∂–∏–∑–Ω–∏ –ö–ª—É–±–∞. –°–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é –ª–µ–Ω—Ç—É –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

| –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π | –†–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å |
|---|---|
| ![Events List](events-calendar-off.png) { width="300" } | ![Full Calendar](events-calendar-on.png) { width="300" } |

## 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–≠–∫—Ä–∞–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ —Å–ª–æ–∂–Ω—ã–π –≥–∏–±—Ä–∏–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **CupertinoPane** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è.

### A. –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (Header)
*   **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** –ö–Ω–æ–ø–∫–∞ ¬´–ù–∞–∑–∞–¥¬ª (–µ—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –±—ã–ª –Ω–µ –∏–∑ —Ç–∞–±-–±–∞—Ä–∞).
*   **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** ¬´–°–æ–±—ã—Ç–∏—è¬ª.
*   **–§–∏–ª—å—Ç—Ä—ã:** –ö–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (`src/views/Events/components/Filters/index.svelte`).
    *   *–ò–Ω–¥–∏–∫–∞—Ü–∏—è:* –ë–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (`activeEventsFiltersAmount`).
    *   *–û–ø—Ü–∏–∏:*
        1.  **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å:** –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ.
        2.  **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–ª–∏–∂–∞–π—à–∏–µ:** –í–∫–ª—é—á–∞–µ—Ç/–æ—Ç–∫–ª—é—á–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å–æ–±—ã—Ç–∏–π (–ø–∞—Ä–∞–º–µ—Ç—Ä `future` –≤ —Å—Ç–æ—Ä–µ).

### B. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å
–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏–º–µ–µ—Ç –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã—Ö —Å–≤–∞–π–ø–æ–º –∏–ª–∏ –∫–ª–∏–∫–æ–º:

1.  **–°–ª–∞–π–¥–µ—Ä (Collapsed):**
    *   **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `CalendarSlider`.
    *   –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ –¥–∞—Ç (Swiper).
    *   *–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:* –¶–≤–µ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ –ø–æ–¥ –¥–∞—Ç–∞–º–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞–ª–∏—á–∏–µ —Å–æ–±—ã—Ç–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ (—Ü–≤–µ—Ç–∞ –∏–∑ `events.cfg.ts`).
2.  **–°–µ—Ç–∫–∞ –º–µ—Å—è—Ü–∞ (Expanded):**
    *   **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `Calendar`.
    *   –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `CupertinoPane` (—à—Ç–æ—Ä–∫–∞ —Å–≤–µ—Ä—Ö—É).
    *   –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –º–µ—Å—è—Ü–∞–º–∏ –∏ –≤—ã–±–∏—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É.
    *   *UX:* –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∞—Ç—ã —à—Ç–æ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è—è —Å–ø–∏—Å–æ–∫ –≤–Ω–∏–∑—É.

### C. –õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π
*   **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `EventCard`.
*   **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:** –°–æ–±—ã—Ç–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–∞—Ç–∞–º. –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω —Ñ–∏–ª—å—Ç—Ä "–ë—É–¥—É—â–∏–µ", –≤ —Å–ø–∏—Å–∫–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å "–ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è" (–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π ID `-1`).
*   **–ê–Ω–∏–º–∞—Ü–∏—è:** –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ (`fade`) –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–∞—Ç—ã –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤.

---

## 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Data Flow & Caching
–õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:

*   **Query:** `eventsFeed` (`src/queries/event.ts`).
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç (`from`, `to`), —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤–∏–¥–∏–º–æ–º—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –º–µ—Å—è—Ü—É.
*   **Local Cache:** –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `events` —Å –∫–ª—é—á–æ–º –≤–∏–¥–∞ `YYYYMMDD`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –¥–∞—Ç –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.
*   **Entity:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω `Entity` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ (`eventsFeedHandler.loading`).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`src/config/events.cfg.ts`)
–í–Ω–µ—à–Ω–∏–π –≤–∏–¥ (–∏–∫–æ–Ω–∫–∏, —Ü–≤–µ—Ç–∞) –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥–æ–º, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –±–µ–∑ –ø—Ä–∞–≤–∫–∏ –≤–µ—Ä—Å—Ç–∫–∏.

```typescript
// –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞
{
    format: 'tender',
    name: '–¢–µ–Ω–¥–µ—Ä–Ω—ã–π —Ä–∞–∑–±–æ—Ä',
    color: 'primary brightness-90', // –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è utility-–∫–ª–∞—Å—Å—ã
    icon: '<svg...>' // –í–µ–∫—Ç–æ—Ä–Ω–∞—è –∏–∫–æ–Ω–∫–∞
}
```

---

## 3. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| **Calendar** | –ü–æ–ª–Ω–∞—è —Å–µ—Ç–∫–∞ –º–µ—Å—è—Ü–∞. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –¥–∞—Ç (`createCalendarRange`). –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –º–µ—Å—è—Ü–µ–≤. |
| **CalendarSlider** | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø–µ—Ä. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º (`sync` flag). |
| **EventCard** | –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–±—ã—Ç–∏—è. –°–æ–¥–µ—Ä–∂–∏—Ç —Ñ–æ–ª–ª–±—ç–∫ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`handleBgImageError`) ‚Äî –µ—Å–ª–∏ –æ–±–ª–æ–∂–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å, —Å—Ç–∞–≤–∏—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è. |
| **CupertinoPane** | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ `swiperCreate`. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å `inverse: true` (—à—Ç–æ—Ä–∫–∞ —Å–≤–µ—Ä—Ö—É) –∏ `breaks` –¥–ª—è –¥–≤—É—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤—ã—Å–æ—Ç—ã. |

---

## 4. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ UX

1.  **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –≤ `Calendar` –æ–±–Ω–æ–≤–ª—è–µ—Ç `CalendarSlider` –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç. –°—Ç–æ—Ä `eventsFilters` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–æ—Ç–∫—Ä—ã—Ç/–∑–∞–∫—Ä—ã—Ç) –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏.
2.  **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `events` (—á–µ—Ä–µ–∑ WebSocket/Push) –≤—ã–∑—ã–≤–∞–µ—Ç `refresh()`, –æ–±–Ω–æ–≤–ª—è—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
3.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤:** –í —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∫–ª–∏–∫–∏ –ø–æ —Å–ø–∏—Å–∫—É —Å–æ–±—ã—Ç–∏–π –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è (`preventClicks: true` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —à—Ç–æ—Ä–∫–∏), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.
--- FILE: docs/topics/Mobile-Hidden-Gems.md ---
# üíé –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

## 1. –•–∞—Ä–¥–∫–æ–¥ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∫–∞–∫ –∏ –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ, –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞, –∑–∞–≤—è–∑–∞–Ω–Ω–∞—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ ID.

*   **–§–∞–π–ª:** `src/views/Event/components/UserCard/index.svelte`
    ```javascript
    /* –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
    on:click="{() => { if (user.id != 12114) router.go('/residents/' + user.id.toString()); }}"
    ```
*   **–§–∞–π–ª:** `src/views/Polls.svelte`
    *   –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è ID `10069` –∏ `8000` (—Å—É–ø–µ—Ä–∞–¥–º–∏–Ω—ã/—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏?).

## 2. Platform Specific Logic

–í `src/App.svelte` –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ Capacitor Device –ø–ª–∞–≥–∏–Ω:
*   –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Safe Area (–æ—Ç—Å—Ç—É–ø–æ–≤) —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `platform == 'ios' || platform == 'android'`.
*   –õ–æ–≥–∏–∫–∞ —Å–∫–∞–Ω–µ—Ä–∞ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤ —Ç–∞–∫–∂–µ –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –í –±—Ä–∞—É–∑–µ—Ä–µ —Å–∫–∞–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç.

## 3. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ UI (Cupertino Pane)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `cupertino-pane` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —à—Ç–æ—Ä–æ–∫ (–∫–∞–∫ –≤ iOS).
*   –≠—Ç–æ –Ω–µ –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∞ JS-—ç–º—É–ª—è—Ü–∏—è.
*   –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–ª–∞—Å—Å—ã `.pane` –≤ `style.css`.

## 4. OTA Updates (Capgo)

–í `capacitor.config.ts` –ø—Ä–æ–ø–∏—Å–∞–Ω –∫–ª—é—á –¥–ª—è `CapacitorUpdater`.
*   `autoUpdate: true` (–≤–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
*   URL –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: `http://ota.grizodubov.ru:5173`.
*   **–†–∏—Å–∫:** –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä OTA –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –¥–æ–ª–≥–æ –ø—ã—Ç–∞—Ç—å—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

## 5. XMLHttpRequest

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `XMLHttpRequest` –≤ 2025 –≥–æ–¥—É (–≤ —Ñ–∞–π–ª–µ `src/helpers/request.ts`) ‚Äî –∞—Ä—Ö–∞–∏–∑–º. –í —Å—Ä–µ–¥–µ Capacitor (WebView) `fetch` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ –∏ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥.
--- FILE: docs/topics/Mobile-Main.md ---
# –û—Å–Ω–æ–≤–Ω—ã–µ –≠–∫—Ä–∞–Ω—ã –∏ –§—É–Ω–∫—Ü–∏–∏

–ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## 1. –≠–∫—Ä–∞–Ω ¬´–ú–æ–Ω–∏—Ç–æ—Ä¬ª (Home)
**–§–∞–π–ª:** `src/views/Home/Home.svelte`
**–ú–∞—Ä—à—Ä—É—Ç:** `/home`

–ì–ª–∞–≤–Ω—ã–π —Ö–∞–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º.

![Home Screen](mobile-home-screen.png) { width="300" }

### –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (Header)
–ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

*   **–ü—Ä–æ—Ñ–∏–ª—å (—Å–ª–µ–≤–∞):** –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–∞–∂–∞—Ç–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`/me`).
*   **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Å–ø—Ä–∞–≤–∞):**
    1.  **–°–∫–∞–Ω–µ—Ä:** –ó–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –∫–æ–¥–æ–≤.
    2.  **–ú–æ–π QR:** –ü–æ–∫–∞–∑ –ª–∏—á–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏.
    3.  **–¶–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** –ò–∫–æ–Ω–∫–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞ —Å **–±–µ–π–¥–∂–µ–º** (—Å—á–µ—Ç—á–∏–∫–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö), –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º –∫ `bindings.notifications`.

### –õ–µ–Ω—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

1.  **–ö–∞—Ä—É—Å–µ–ª—å –°–æ–±—ã—Ç–∏–π (Events)**
    *   **–î–∞–Ω–Ω—ã–µ:** `eventsFeed` (—Å–æ–±—ã—Ç–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –±—É–¥—É—â–µ–µ).
    *   **UI:** –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø –∫–∞—Ä—Ç–æ—á–µ–∫ `EventCard`. –¶–≤–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–¢–µ–Ω–¥–µ—Ä, –ù–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥ –∏ –¥—Ä.).

2.  **–û–ø—Ä–æ—Å—ã (Polls)**
    *   **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `PollCard`.
    *   **–õ–æ–≥–∏–∫–∞:** –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø—Ä–æ—Å—ã. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –∏ –≤–≤–æ–¥ —Å–≤–æ–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (custom). –û—Ç–≤–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `addVote`.

3.  **–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã**
    *   –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º.
    *   –ö–Ω–æ–ø–∫–∞ **"–í—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã"** –≤—ã–∑—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (`CupertinoPane`) —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º.
    ![Contacts List](home-contacts-list-popup.png) { width="250" }

4.  **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä—ã (AI Recommendations)**
    *   **Query:** `userRecommendations`.
    *   **–õ–æ–≥–∏–∫–∞:** –°–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Ç–µ–≥–æ–≤ —Å–ø—Ä–æ—Å–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (`tags` vs `interests`).

---

## 2. –¶–µ–Ω—Ç—Ä –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Log)
**–§–∞–π–ª:** `src/layouts/Main/components/Log/index.svelte`

–õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞.

![Notifications Log](home-notifications-log.png) { width="300" }

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã payload (`n.event`):

| –¢–∏–ø —Å–æ–±—ã—Ç–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ UI | –î–µ–π—Å—Ç–≤–∏–µ |
| :--- | :--- | :--- |
| **arrive** | "–ò–º—è –§–∞–º–∏–ª–∏—è –ø—Ä–∏–±—ã–ª –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ..." | –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ –∫ —Å–æ–±—ã—Ç–∏—é |
| **manager_connection_add** | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏ | –ö–Ω–æ–ø–∫–∏ **¬´–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è¬ª** / **¬´–û—Ç–∫–ª–æ–Ω–∏—Ç—å¬ª** |
| **manager_connection_response** | –û—Ç–≤–µ—Ç –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ | –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ (–ø—Ä–∏–Ω—è—Ç–æ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ) |
| **online_request** | –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á—É | –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é —Å–ª–æ—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ |

---

## 3. –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Settings/Me)
**–§–∞–π–ª:** `src/views/Settings/Settings.svelte`

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –∞–Ω–∫–µ—Ç–æ–π —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞.

![User Profile](user-profile-screen.png) { width="300" }

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏
1.  **–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
    *   –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ (—Å –∫—Ä–æ–ø–µ—Ä–æ–º `UploadAvatar`).
    *   –§–ò–û, –î–æ–ª–∂–Ω–æ—Å—Ç—å, –ö–æ–º–ø–∞–Ω–∏—è.
    *   *–í–∞–∂–Ω–æ:* –°–º–µ–Ω–∞ Email/–¢–µ–ª–µ—Ñ–æ–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–¥ (`userChange...`).
2.  **–ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏:** –û–±–æ—Ä–æ—Ç, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, –≥–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω–∏—è (—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏).
3.  **–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Tagging System):**
    *   –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ `tagList`.
    *   **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
        *   `company_scope` (–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
        *   `company_needs` (–ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏)
        *   `personal_expertise` (–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏)
        *   `hobbies` (–£–≤–ª–µ—á–µ–Ω–∏—è)
4.  **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º:** –í—ã—Ö–æ–¥ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (soft delete –Ω–∞ 2 –Ω–µ–¥–µ–ª–∏).

---

## 4. QR –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
**–§–∞–π–ª:** `src/views/Home/components/`

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –æ—Ñ–ª–∞–π–Ω–µ.

### –°–∫–∞–Ω–µ—Ä (ScannerButton)
*   **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** `@capacitor-mlkit/barcode-scanning`.
*   **UI:** –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º (`barcode-scanner-active`), –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–∞–º–∫–∞ –Ω–∞–≤–µ–¥–µ–Ω–∏—è.
*   **–õ–æ–≥–∏–∫–∞:**
    *   `type: 'user'` ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞.
    *   `type: 'event'` ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ (`QREventRegistration`) –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ.

![Camera Permission](home-camera-permission-prompt.png) { width="250" }

### –ú–æ–π QR (QRButton)
*   **Query:** `QRShow`.
*   **UI:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º QR-–∫–æ–¥–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–µ–¥—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –≤—Ö–æ–¥–µ –∏–ª–∏ –æ–±–º–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏.
--- FILE: docs/topics/Mobile-Meetings.md ---
# ü§ù –†–∞–∑–¥–µ–ª ¬´–í—Å—Ç—Ä–µ—á–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã¬ª (Meetings)

**–§–∞–π–ª:** `src/views/Meetings/Meetings.svelte`
**–ú–∞—Ä—à—Ä—É—Ç:** `/meetings`

–ï–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π —Ä–µ–∑–∏–¥–µ–Ω—Ç–∞: –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∞–º–∏, –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–∞ –æ–±—â–µ–Ω–∏–µ –∏ –∞—Ä—Ö–∏–≤–æ–º –ø—Ä–æ—à–µ–¥—à–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.

| –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ | –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ |
|---|---|
| ![Scheduled Meetings](meetings-scheduled.png) { width="300" } | ![Requested Meetings](meetings-requested.png) { width="300" } |

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–≠–∫—Ä–∞–Ω –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–∫–ª–∞–¥–æ–∫-—Ñ–∏–ª—å—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

#### A. –í–∫–ª–∞–¥–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (Tabs)
–ü–∞–Ω–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–∞–∫ –≥—Ä—É–ø–ø–∞ –∫–Ω–æ–ø–æ–∫ (`src/views/Meetings/Meetings.svelte`, —Å—Ç—Ä–æ–∫–∏ 282-321):

1.  **–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ** (–∞–∫—Ç–∏–≤–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    *   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –≤—Å—Ç—Ä–µ—á.
    *   *–õ–æ–≥–∏–∫–∞:* `!archive && !requests`.
    *   *–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:* `meetingsFiltered`, `meetingsOfflineFiltered`, `meetingsOnlineFiltered`.

2.  **–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ**
    *   –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∏ –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏, –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
    *   *–õ–æ–≥–∏–∫–∞:* `requests = true`.
    *   *–ò–Ω–¥–∏–∫–∞—Ü–∏—è:* –ë–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–æ—Ä–∞ `bindings`).
    *   *–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:* `meetingsRequestsFiltered`.

3.  **–ê—Ä—Ö–∏–≤**
    *   –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—à–µ–¥—à–∏—Ö –≤—Å—Ç—Ä–µ—á –∏ –æ–±–º–µ–Ω–æ–≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏.
    *   *–õ–æ–≥–∏–∫–∞:* `archive = true`.
    *   *–§—É–Ω–∫—Ü–∏–∏:* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–æ—à–µ–¥—à—É—é –≤—Å—Ç—Ä–µ—á—É (–†–µ–π—Ç–∏–Ω–≥ / –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π).
    *   *–ò–Ω–¥–∏–∫–∞—Ü–∏—è:* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–µ–Ω–Ω—ã—Ö / –í—Å–µ–≥–æ).

#### B. –°–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–µ—á
–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –∏ —Ç–∏–ø–∞ –≤—Å—Ç—Ä–µ—á–∏.

**–¢–∏–ø—ã –∫–∞—Ä—Ç–æ—á–µ–∫:**
*   **EventCard:** –í—Å—Ç—Ä–µ—á–∏, –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ —Ä–∞–º–∫–∞—Ö –æ—Ñ–ª–∞–π–Ω-–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.
    *   *–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:* `src/views/Meetings/components/EventCard/index.svelte`.
*   **OnlineCard:** –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏.
    *   *–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:* `src/views/Meetings/components/OnlineCard/index.svelte`.
*   **OfflineCard:** –§–∞–∫—Ç –æ–±–º–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ (—Ü–∏—Ñ—Ä–æ–≤–∞—è –≤–∏–∑–∏—Ç–∫–∞).
    *   *–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:* `src/views/Meetings/components/OfflineCard/index.svelte`.
*   **RequestCard:** –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—Å—Ç—Ä–µ—á—É (–≤ —Ç–∞–±–µ "–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ").
    *   *–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:* `src/views/Meetings/components/RequestCard/index.svelte`.

#### C. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (–¥–ª—è –ê—Ä—Ö–∏–≤–∞)
–í —Ä–µ–∂–∏–º–µ "–ê—Ä—Ö–∏–≤" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
*   **"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –±–µ–∑ –æ—Ü–µ–Ω–∫–∏"**: –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –≤—Å—Ç—Ä–µ—á–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.

---

### 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### Data Flow
–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ä–∞–∑—É –≤—Å–µ —Ç–∏–ø—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

*   **Query:** `userEventsConnectionsAll` (`src/queries/user.ts`).
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
    *   `archive`: boolean (—Ñ–ª–∞–≥ –∞—Ä—Ö–∏–≤–∞)
    *   `requests`: boolean (—Ñ–ª–∞–≥ –∑–∞–ø—Ä–æ—Å–æ–≤)
    *   `dt`: —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞ (–¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—à–µ–¥—à–∏—Ö/–±—É–¥—É—â–∏—Ö).
*   **–û–±—Ä–∞–±–æ—Ç–∫–∞:** –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –º–∞—Å—Å–∏–≤—ã `meetings` (—Å–æ–±—ã—Ç–∏—è), `meetingsOffline` (–æ–±–º–µ–Ω –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏), `meetingsOnline` (–æ–Ω–ª–∞–π–Ω) –∏ `meetingsRequests` (–∑–∞–ø—Ä–æ—Å—ã).

#### –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (`parseData`)
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–∞–±–æ–≤ "–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ/–ê—Ä—Ö–∏–≤", –Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ "–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ" –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö.

```typescript
// –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –∞—Ä—Ö–∏–≤–∞
const users = list[i].users.filter(u => {
    if (archive) {
        // –í –∞—Ä—Ö–∏–≤ –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–≤—à–∏–µ—Å—è –≤—Å—Ç—Ä–µ—á–∏ (state == true)
        if (u.connection.state) { return true; }
    } else {
        // –í –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –Ω–µ—Å–æ—Å—Ç–æ—è–≤—à–∏–µ—Å—è (–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ)
        if (!u.connection.state) { return true; }
    }
});
```

#### –û—Ü–µ–Ω–∫–∞ –≤—Å—Ç—Ä–µ—á (Feedback Loop)
–î–ª—è –ø—Ä–æ—à–µ–¥—à–∏—Ö –≤—Å—Ç—Ä–µ—á —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏:
1.  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ü–µ–Ω–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É".
2.  –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ `ModalConfirmation`.
3.  –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å `eventConnectionMark` / `offlineConnectionMark` / `onlineConnectionMark` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤—Å—Ç—Ä–µ—á–∏.

---

### 3. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ UX

1.  **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ó–ù–ê–ö–û–ú–´":**
    *   –ù–∞ –∞–≤–∞—Ç–∞—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–µ–π–¥–∂ "–ó–ù–ê–ö–û–ú–´", –µ—Å–ª–∏ —Å —ç—Ç–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º —É–∂–µ –±—ã–ª –∫–æ–Ω—Ç–∞–∫—Ç –∏–ª–∏ –≤—Å—Ç—Ä–µ—á–∞ —Ä–∞–Ω–µ–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä `meetings`).
2.  **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º:**
    *   –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏ (`userMeetingRequestConfirmation`) —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏.
3.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
    *   –ö–∞—Ä—Ç–æ—á–∫–∏ –≤—Å—Ç—Ä–µ—á –∏–º–µ—é—Ç —Ü–≤–µ—Ç–æ–≤—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é —Å—Ç–∞—Ç—É—Å–∞ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ / –æ–∂–∏–¥–∞–Ω–∏–µ / –æ—Ç–∫–∞–∑), —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —á–µ—Ä–µ–∑ CSS –∫–ª–∞—Å—Å—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö `ResidentCard*`.

---

### 4. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–¥–µ–ª–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| **ResidentCard** | –ë–∞–∑–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤—Å—Ç—Ä–µ—á–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `EventCard`. –°–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (–ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å). |
| **RequestCard** | –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–ø—Ä–æ—Å–∞. –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ —Å–ª–æ—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏. |
| **ModalConfirmation** | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π (–æ—Ü–µ–Ω–∫–∞, –æ—Ç–º–µ–Ω–∞ –≤—Å—Ç—Ä–µ—á–∏). |
| **OnlineCard** | –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–π –æ–Ω–ª–∞–π–Ω-–≤—Å—Ç—Ä–µ—á–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∑–≤–æ–Ω–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å). |

--- FILE: docs/topics/Mobile-Overview.md ---
# Club Client: –û–±–∑–æ—Ä –∏ –°—Ç–µ–∫

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –í–æ–ø—Ä–µ–∫–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–º –æ–∂–∏–¥–∞–Ω–∏—è–º, —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è** React Native –ø—Ä–æ–µ–∫—Ç–æ–º.
–≠—Ç–æ **Hybrid Application**, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –Ω–∞ **Svelte 4**, –∫–æ—Ç–æ—Ä–æ–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º WebView —Å –ø–æ–º–æ—â—å—é **Capacitor**.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –°–ª–æ–π | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| **UI Framework** | **Svelte** | 4.2.19 | –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫. |
| **Runtime** | **Capacitor** | 7.0.0 | –ú–æ—Å—Ç –∫ –Ω–∞—Ç–∏–≤–Ω—ã–º API (iOS/Android). |
| **Build Tool** | **Vite** | 5.4.19 | –°–±–æ—Ä—â–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞. |
| **Language** | **TypeScript** | 5.5.3 | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è. |
| **Styling** | **TailwindCSS** | 3.4 | + DaisyUI –¥–ª—è UI-–∫–∏—Ç–∞. |
| **Updates** | **Capgo** | 7.x | OTA (Over-the-Air) –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –≤ —Å—Ç–æ—Ä—ã. |

## –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–í–º–µ—Å—Ç–æ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ React Native –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–µ–±-—Ä–µ—à–µ–Ω–∏—è –∏ –ø–ª–∞–≥–∏–Ω—ã Capacitor:

*   **Routing:** –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (`src/libs/Router`), –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π —Ç–æ–º—É, —á—Ç–æ –≤ `club-manager`.
*   **Gestures:** `svelte-swipe-cards` –¥–ª—è —Å–≤–∞–π–ø–æ–≤ (Tinder-like –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å).
*   **UI Components:** `swiper` (—Å–ª–∞–π–¥–µ—Ä—ã), `cupertino-pane` (–Ω–∏–∂–Ω–∏–µ —à—Ç–æ—Ä–∫–∏/–º–æ–¥–∞–ª–∫–∏).
*   **Native Features:**
    *   `@capacitor/camera` ‚Äî —Ñ–æ—Ç–æ.
    *   `@capacitor/push-notifications` ‚Äî –ø—É—à–∏.
    *   `@capacitor-mlkit/barcode-scanning` ‚Äî —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR.
    *   `capacitor-plugin-safe-area` ‚Äî –æ—Ç—Å—Ç—É–ø—ã –ø–æ–¥ "—á–µ–ª–∫—É" –∏ "–±–æ—Ä–æ–¥—É" —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤.

## –û—Ç–ª–∏—á–∏—è –æ—Ç React Native

–¢–∞–∫ –∫–∞–∫ —ç—Ç–æ WebView –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
1.  –í–µ—Å—å UI ‚Äî —ç—Ç–æ HTML/CSS.
2.  –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ DOM –∏ JS.
3.  –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏–º–∏—Ç–∏—Ä—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã, –Ω–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ SPA (Single Page Application).
--- FILE: docs/topics/Mobile-Setup.md ---
# –ó–∞–ø—É—Å–∫ –∏ –°–±–æ—Ä–∫–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö: –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≤–µ—Ä—Å—Ç–∫–∏) –∏ –∫–∞–∫ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ —ç–º—É–ª—è—Ç–æ—Ä/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ).

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   Node.js 20+
*   XCode (–¥–ª—è iOS) / Android Studio (–¥–ª—è Android)
*   CocoaPods (–¥–ª—è iOS)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª `.env` (–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ). –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
*   `API_URL` ‚Äî –∞–¥—Ä–µ—Å –±—ç–∫–µ–Ω–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://localhost:8000`).
*   `EVENTS_API_KEY` ‚Äî –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ API —Å–æ–±—ã—Ç–∏–π.

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Browser)

–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è –≤–µ—Ä—Å—Ç–∫–∏ UI –±–µ–∑ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

```bash
npm install
npm run dev
```
–î–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3000` (–ø–æ—Ä—Ç –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è, —Å–º. –∫–æ–Ω—Å–æ–ª—å).

## –ó–∞–ø—É—Å–∫ –≤ –≠–º—É–ª—è—Ç–æ—Ä–µ (Capacitor)

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (–∫–∞–º–µ—Ä–∞, –ø—É—à–∏, safe-area).

1.  **–°–±–æ—Ä–∫–∞ –≤–µ–±-—á–∞—Å—Ç–∏:**
    ```bash
    npm run build
    ```
    *–í–∞–∂–Ω–æ:* Capacitor –±–µ—Ä–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `build` (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `capacitor.config.ts`), –∞ –Ω–µ `dist`.

2.  **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏:**
    ```bash
    npx cap sync
    ```

3.  **–ó–∞–ø—É—Å–∫:**
    *   **iOS:** `npx cap run ios` (–æ—Ç–∫—Ä–æ–µ—Ç XCode).
    *   **Android:** `npx cap run android` (–æ—Ç–∫—Ä–æ–µ—Ç Android Studio).

## OTA –û–±–Ω–æ–≤–ª–µ–Ω–∏—è (Live Updates)

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–ª–∞–≥–∏–Ω `@capgo/capacitor-updater`.
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `capacitor.config.ts`.
*   –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å JS/CSS –±–∞–Ω–¥–ª –Ω–∞ –ª–µ—Ç—É, –º–∏–Ω—É—è App Store / Google Play.
*   –°–µ—Ä–≤–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: `http://ota.grizodubov.ru:5173` (—É–∫–∞–∑–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ).
--- FILE: docs/topics/Project-Structure.md ---
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –±—ç–∫–µ–Ω–¥-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.

## –û–±—â–∞—è —Å—Ö–µ–º–∞

```text
club-platform/
‚îú‚îÄ‚îÄ backend/                  # –í—Å–µ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å—ã (Python)
‚îÇ   ‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ club-api/         # –û—Å–Ω–æ–≤–Ω–æ–π API (Legacy Core)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ club-users/       # –°–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ club-comments/    # –°–µ—Ä–≤–∏—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ club-events/      # –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Litestar + GraphQL)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ club-gateway-m/   # API Gateway –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ club-media/       # –°–µ—Ä–≤–∏—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞
‚îÇ   ‚îú‚îÄ‚îÄ setup-all.sh          # –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ start-all.sh          # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Makefile)
‚îÇ
‚îú‚îÄ‚îÄ frontend/                 # –§—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ club-manager/         # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Svelte + Tauri)
‚îÇ   ‚îú‚îÄ‚îÄ club-client/          # –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (React Native / Expo)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/           # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ postgres/             # Init-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ club-docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Writerside)
‚îú‚îÄ‚îÄ Makefile                  # –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º
‚îî‚îÄ‚îÄ docker-compose.yml        # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Postgres, Redis)
```

## –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ (C4 Context)

```mermaid
C4Context
    title System Context Diagram - Club Germes Platform

    Person(client, "Club Member", "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (iOS/Android)")
    Person(manager, "Club Manager", "–í–µ–±-–∞–¥–º–∏–Ω–∫–∞")

    System_Boundary(club_system, "Club Platform Monorepo") {
        System(gateway, "API Gateway", "Auth, Routing, User Context")
        System(legacy_api, "Club API (Legacy)", "Core logic, Users, Chat, Feed")
        System(events_api, "Club Events (New)", "Events Management, GraphQL")
    }

    System_Ext(db, "Yandex Managed PostgreSQL", "Main Database")
    System_Ext(redis, "Redis", "Sessions, Cache, Pub/Sub")
    System_Ext(s3, "Yandex Object Storage", "Backups & Logs")
    System_Ext(fs, "Local File System", "Media Storage (Legacy)")

    System_Ext(sms_gate, "Beeline A2P", "SMS Sending")
    System_Ext(firebase, "Firebase (FCM)", "Push Notifications")
    System_Ext(telegram, "Telegram API", "Bot Notifications")
    System_Ext(mail_gate, "Club Mail Service", "Internal SMTP Relay")

    Rel(client, gateway, "Uses", "HTTPS/REST")
    Rel(manager, gateway, "Uses", "HTTPS/REST")

    Rel(gateway, legacy_api, "Proxies", "HTTP")
    Rel(gateway, events_api, "Proxies", "HTTP")

    Rel(legacy_api, db, "Reads/Writes", "asyncpg")
    Rel(events_api, db, "Reads/Writes", "TortoiseORM")
    Rel(legacy_api, redis, "Auth/Cache", "aioredis")

    Rel(legacy_api, sms_gate, "Sends SMS", "HTTP")
    Rel(legacy_api, firebase, "Sends Pushes", "HTTP")
    Rel(legacy_api, telegram, "Sends Messages", "HTTP")
    Rel(legacy_api, mail_gate, "Sends Emails", "HTTP")
    Rel(legacy_api, fs, "Stores Avatars/Images", "File I/O")
```

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Backend
–í–µ—Å—å –±—ç–∫–µ–Ω–¥ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ **Python**.
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —á–µ—Ä–µ–∑ **Honcho** –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

*   **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:** Starlette, Uvicorn, asyncpg (–∏–ª–∏ Tortoise ORM –≤ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö).
*   **–ú–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ HTTP REST.
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ï–¥–∏–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å PostgreSQL (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ö–µ–º—ã –ª–æ–≥–∏—á–µ—Å–∫–æ–µ).

#### –°—Ç–∞—Ç—É—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤
*   **club-api (Legacy):** –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–Ω–æ–ª–∏—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
*   **club-events (Target):** –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞ Litestar/GraphQL. –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–∞.
*   **club-gateway-m:** –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (BFF).

### Frontend
*   **club-manager:** –ù–∞—Å—Ç–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∫–ª—É–±–∞ (Svelte).

### Infrastructure
–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–∏–±—Ä–∏–¥–Ω–∞—è —Å—Ö–µ–º–∞:
*   **Docker:** –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Postgres, Redis).
*   **Local Process:** –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä—è–º–æ –≤ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ Python (venv).
--- FILE: docs/topics/Quick-Start.md ---
# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç `club-platform` –ª–æ–∫–∞–ª—å–Ω–æ –∑–∞ 5‚Äì10 –º–∏–Ω—É—Ç.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
*   **Docker** –∏ **Docker Compose**
*   **Python 3.10+** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.12)
*   **Make** (–æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ macOS/Linux)
*   **Node.js** (–¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)

## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π:

```bash
make install-tools
```

> **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
> 1. –°–æ–∑–¥–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `.venv` –¥–ª—è —É—Ç–∏–ª–∏—Ç—ã `honcho`.
> 2. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç `backend/setup-all.sh`.
> 3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –≤ `backend/apps/` —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π `venv` –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`.

## 2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
make dev
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
1.  –ü–æ–¥–Ω–∏–º–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ Docker (Postgres –Ω–∞ –ø–æ—Ä—Ç—É `5433`, Redis –Ω–∞ `6379`).
2.  –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ `honcho` (Procfile).
3.  –í–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º `reload` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç —Å–µ—Ä–≤–∏—Å—ã.

> **–í–∞–∂–Ω–æ:**
> –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ `bad interpreter` –∏–ª–∏ `command not found`, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫–∏ `venv` –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `make install-tools` –∑–∞–Ω–æ–≤–æ.

## 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞

–ß—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë:
1.  –ù–∞–∂–º–∏—Ç–µ `Ctrl + C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `make dev`.
2.  –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
make down
```

## Troubleshooting (–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º)

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤
–ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `Address already in use`:
*   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–ø—É—â–µ–Ω –ª–∏ —É –≤–∞—Å –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É `5432`.
*   Docker Compose –Ω–∞—Å—Ç—Ä–æ–µ–Ω –º–∞–ø–∏—Ç—å –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ **`5433`** (`5433:5432`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
*   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –∫ `5433`.

### –û—à–∏–±–∫–∏ SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
–í –ª–æ–≥–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∞: `sslmode value "require" invalid when SSL support is not compiled in`.
*   **–õ–æ–∫–∞–ª—å–Ω–æ:** SSL –æ–±—ã—á–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥ `pg.toml` –∏–ª–∏ `.env`.
*   **–ü—Ä–æ–¥–∞–∫—à–Ω:** Managed PostgreSQL (Yandex/AWS) —Ç—Ä–µ–±—É–µ—Ç `sslmode=require`.

### –û—à–∏–±–∫–∏ Redis
–ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis:
*   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `club-platform-redis-1` –∑–∞–ø—É—â–µ–Ω (`docker ps`).
*   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ö–æ—Å—Ç Redis –≤ –∫–æ–Ω—Ñ–∏–≥–µ: –ª–æ–∫–∞–ª—å–Ω–æ —ç—Ç–æ `localhost`, –≤–Ω—É—Ç—Ä–∏ Docker-—Å–µ—Ç–∏ ‚Äî `redis`.

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `make logs` | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| `make clean` | –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Ç–æ–º–∞ –¥–∞–Ω–Ω—ã—Ö!) |
| `make ps` | –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ |

--- FILE: docs/topics/Onboarding.topic ---
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
        SYSTEM "https://resources.jetbrains.com/writerside/1.0/xhtml-entities.dtd">
<topic xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="https://resources.jetbrains.com/writerside/1.0/topic.v2.xsd"
       title="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Club Germes" id="Onboarding">

    <section-starting-page>
        <title>Club Germes Developer Onboarding</title>
        <description>
            –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
        </description>

        <spotlight>
            <a href="Project-Structure.md" type="development" summary="–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</a>
            <a href="Quick-Start.md" type="start" summary="–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</a>
        </spotlight>

        <primary>
            <title>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü–æ—Ç–æ–∫–∏</title>
            <a href="Auth-Flow.md" summary="–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–µ—Å—Å–∏–∏"/>
            <a href="Event-Registration-Flow.md" summary="–†–∞–∑–±–æ—Ä –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ"/>
            <a href="Legacy-Internals.md" summary="–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç PgBank, PgQueue –∏ —Å—Ç–∞—Ä—ã–π –∫–æ–¥"/>
        </primary>

        <secondary>
            <title>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</title>
            <a href="API-Reference.md" summary="–û–ø–∏—Å–∞–Ω–∏–µ API endpoints"/>
            <a href="Database-Schema.md" summary="–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL"/>
            <a href="Business-Rules.md" summary="–ù–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ ID"/>
        </secondary>

    </section-starting-page>

</topic>